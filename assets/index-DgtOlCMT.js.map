{"version":3,"file":"index-DgtOlCMT.js","sources":["../../src/data/storage.js","../../__vite-browser-external","../../node_modules/bcryptjs/dist/bcrypt.js","../../src/data/models.js","../../src/core/auth.js","../../src/core/drinks.js","../../src/core/leaderboards.js","../../src/core/badges.js","../../src/core/stats.js","../../src/utils/notifications.js","../../src/utils/validation.js","../../src/components/auth/LoginPage.js","../../src/components/auth/RegisterPage.js","../../src/components/common/NavBar.js","../../src/components/dashboard/QuickAddDrink.js","../../src/utils/formatting.js","../../src/components/dashboard/RecentEntries.js","../../src/components/dashboard/DashboardPage.js","../../src/components/leaderboards/LeaderboardPage.js","../../src/components/profile/ProfilePage.js","../../src/components/admin/AdminPage.js","../../src/components/stats/StatsPage.js","../../src/components/router.js","../../src/main.js"],"sourcesContent":["// LocalStorage wrapper for data persistence\n\nconst STORAGE_KEY = 'drink-tracker-data';\n\nexport class DataManager {\n  constructor() {\n    this.data = this.load();\n  }\n\n  load() {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEY);\n      if (stored) {\n        return JSON.parse(stored);\n      }\n    } catch (error) {\n      console.error('Failed to load data:', error);\n    }\n    \n    return {\n      users: [],\n      drinkEntries: [],\n      userStats: {},\n      badges: this.getDefaultBadges()\n    };\n  }\n\n  save() {\n    try {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(this.data));\n      return true;\n    } catch (error) {\n      console.error('Failed to save data:', error);\n      return false;\n    }\n  }\n\n  // User management\n  createUser(userData) {\n    this.data.users.push(userData);\n    this.save();\n    return userData;\n  }\n\n  getUser(userId) {\n    return this.data.users.find(u => u.id === userId);\n  }\n\n  getUserByEmail(email) {\n    return this.data.users.find(u => u.email === email);\n  }\n\n  updateUser(userId, updates) {\n    const user = this.getUser(userId);\n    if (user) {\n      Object.assign(user, updates);\n      this.save();\n      return user;\n    }\n    return null;\n  }\n\n  getAllUsers() {\n    return this.data.users;\n  }\n\n  getPendingUsers() {\n    return this.data.users.filter(u => u.status === 'pending');\n  }\n\n  // Drink entry management\n  createDrinkEntry(entryData) {\n    this.data.drinkEntries.push(entryData);\n    this.updateStatsForEntry(entryData);\n    this.save();\n    return entryData;\n  }\n\n  getDrinkEntry(entryId) {\n    return this.data.drinkEntries.find(e => e.id === entryId);\n  }\n\n  updateDrinkEntry(entryId, updates) {\n    const entry = this.getDrinkEntry(entryId);\n    if (entry) {\n      Object.assign(entry, updates);\n      this.recalculateAllStats();\n      this.save();\n      return entry;\n    }\n    return null;\n  }\n\n  deleteDrinkEntry(entryId) {\n    const index = this.data.drinkEntries.findIndex(e => e.id === entryId);\n    if (index !== -1) {\n      this.data.drinkEntries.splice(index, 1);\n      this.recalculateAllStats();\n      this.save();\n      return true;\n    }\n    return false;\n  }\n\n  getAllDrinkEntries() {\n    return this.data.drinkEntries;\n  }\n\n  // Statistics\n  getUserStats(userId) {\n    if (!this.data.userStats[userId]) {\n      this.data.userStats[userId] = {\n        userId,\n        totalDrinks: { coffee: 0, beer: 0, other: 0, total: 0 },\n        totalPaid: { coffee: 0, beer: 0, other: 0, total: 0 },\n        paymentRatio: 0,\n        badges: [],\n        lastActive: Date.now()\n      };\n    }\n    return this.data.userStats[userId];\n  }\n\n  getGlobalStats() {\n    const stats = {\n      totalDrinks: { coffee: 0, beer: 0, other: 0, total: 0 },\n      totalPaid: { coffee: 0, beer: 0, other: 0, total: 0 },\n      totalUsers: this.data.users.filter(u => u.status === 'approved').length,\n      totalEntries: this.data.drinkEntries.length\n    };\n\n    Object.values(this.data.userStats).forEach(userStat => {\n      stats.totalDrinks.coffee += userStat.totalDrinks.coffee;\n      stats.totalDrinks.beer += userStat.totalDrinks.beer;\n      stats.totalDrinks.other += userStat.totalDrinks.other;\n      stats.totalDrinks.total += userStat.totalDrinks.total;\n      stats.totalPaid.coffee += userStat.totalPaid.coffee;\n      stats.totalPaid.beer += userStat.totalPaid.beer;\n      stats.totalPaid.other += userStat.totalPaid.other;\n      stats.totalPaid.total += userStat.totalPaid.total;\n    });\n\n    return stats;\n  }\n\n  updateStatsForEntry(entry) {\n    // Update consumption stats\n    entry.consumers.forEach(consumerId => {\n      const stats = this.getUserStats(consumerId);\n      const quantityPerConsumer = entry.quantity / entry.consumers.length;\n      stats.totalDrinks[entry.drinkType] += quantityPerConsumer;\n      stats.totalDrinks.total += quantityPerConsumer;\n      stats.lastActive = Date.now();\n    });\n\n    // Update payment stats\n    entry.payers.forEach(payer => {\n      const stats = this.getUserStats(payer.userId);\n      stats.totalPaid[entry.drinkType] += payer.quantity;\n      stats.totalPaid.total += payer.quantity;\n      stats.lastActive = Date.now();\n    });\n\n    // Update payment ratios\n    Object.values(this.data.userStats).forEach(stats => {\n      stats.paymentRatio = stats.totalDrinks.total > 0 \n        ? stats.totalPaid.total / stats.totalDrinks.total \n        : 0;\n    });\n  }\n\n  recalculateAllStats() {\n    // Reset all stats\n    this.data.userStats = {};\n    \n    // Recalculate from all entries\n    this.data.drinkEntries.forEach(entry => {\n      this.updateStatsForEntry(entry);\n    });\n  }\n\n  // Badge management\n  awardBadge(userId, badgeId) {\n    const stats = this.getUserStats(userId);\n    if (!stats.badges.find(b => b.badgeId === badgeId)) {\n      stats.badges.push({\n        badgeId,\n        awardedAt: Date.now()\n      });\n      this.save();\n      return true;\n    }\n    return false;\n  }\n\n  getUserBadges(userId) {\n    const stats = this.getUserStats(userId);\n    return stats.badges.map(b => ({\n      ...this.data.badges.find(badge => badge.id === b.badgeId),\n      awardedAt: b.awardedAt\n    }));\n  }\n\n  getAllBadges() {\n    return this.data.badges;\n  }\n\n  getDefaultBadges() {\n    return [\n      {\n        id: 'first-drink',\n        name: 'Primo Sorso',\n        description: 'Registra la tua prima bevuta',\n        icon: 'ü•§',\n        rarity: 'common',\n        criteria: { type: 'total_drinks', threshold: 1, drinkType: null }\n      },\n      {\n        id: 'coffee-starter',\n        name: 'Amante del Caff√®',\n        description: 'Bevi 5 caff√®',\n        icon: '‚òï',\n        rarity: 'common',\n        criteria: { type: 'total_drinks', threshold: 5, drinkType: 'coffee' }\n      },\n      {\n        id: 'beer-starter',\n        name: 'Appassionato di Birra',\n        description: 'Bevi 5 birre',\n        icon: 'üç∫',\n        rarity: 'common',\n        criteria: { type: 'total_drinks', threshold: 5, drinkType: 'beer' }\n      },\n      {\n        id: 'social-drinker',\n        name: 'Bevitore Sociale',\n        description: 'Raggiungi 10 bevute totali',\n        icon: 'üéâ',\n        rarity: 'common',\n        criteria: { type: 'total_drinks', threshold: 10, drinkType: null }\n      },\n      {\n        id: 'generous-friend',\n        name: 'Amico Generoso',\n        description: 'Paga per 10 bevute',\n        icon: 'üí∞',\n        rarity: 'rare',\n        criteria: { type: 'total_paid', threshold: 10, drinkType: null }\n      },\n      {\n        id: 'coffee-addict',\n        name: 'Dipendente da Caff√®',\n        description: 'Bevi 25 caff√®',\n        icon: '‚òï',\n        rarity: 'rare',\n        criteria: { type: 'total_drinks', threshold: 25, drinkType: 'coffee' }\n      },\n      {\n        id: 'beer-expert',\n        name: 'Esperto di Birra',\n        description: 'Bevi 25 birre',\n        icon: 'üç∫',\n        rarity: 'rare',\n        criteria: { type: 'total_drinks', threshold: 25, drinkType: 'beer' }\n      },\n      {\n        id: 'party-animal',\n        name: 'Animale da Festa',\n        description: 'Raggiungi 50 bevute totali',\n        icon: 'üéä',\n        rarity: 'epic',\n        criteria: { type: 'total_drinks', threshold: 50, drinkType: null }\n      },\n      {\n        id: 'big-spender',\n        name: 'Grande Spendaccione',\n        description: 'Paga per 50 bevute',\n        icon: 'üí∏',\n        rarity: 'epic',\n        criteria: { type: 'total_paid', threshold: 50, drinkType: null }\n      },\n      {\n        id: 'legend',\n        name: 'Leggenda',\n        description: 'Raggiungi 100 bevute totali',\n        icon: 'üëë',\n        rarity: 'legendary',\n        criteria: { type: 'total_drinks', threshold: 100, drinkType: null }\n      }\n    ];\n  }\n\n  // Export/Import\n  export() {\n    return JSON.stringify(this.data, null, 2);\n  }\n\n  import(jsonData) {\n    try {\n      const imported = JSON.parse(jsonData);\n      // Validate structure\n      if (!imported.users || !imported.drinkEntries) {\n        throw new Error('Invalid data format');\n      }\n      this.data = imported;\n      this.save();\n      return { success: true };\n    } catch (error) {\n      return { success: false, error: error.message };\n    }\n  }\n\n  clear() {\n    this.data = {\n      users: [],\n      drinkEntries: [],\n      userStats: {},\n      badges: this.getDefaultBadges()\n    };\n    this.save();\n  }\n}\n","export default {}","/*\r\n Copyright (c) 2012 Nevins Bartolomeo <nevins.bartolomeo@gmail.com>\r\n Copyright (c) 2012 Shane Girish <shaneGirish@gmail.com>\r\n Copyright (c) 2014 Daniel Wirtz <dcode@dcode.io>\r\n\r\n Redistribution and use in source and binary forms, with or without\r\n modification, are permitted provided that the following conditions\r\n are met:\r\n 1. Redistributions of source code must retain the above copyright\r\n notice, this list of conditions and the following disclaimer.\r\n 2. Redistributions in binary form must reproduce the above copyright\r\n notice, this list of conditions and the following disclaimer in the\r\n documentation and/or other materials provided with the distribution.\r\n 3. The name of the author may not be used to endorse or promote products\r\n derived from this software without specific prior written permission.\r\n\r\n THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR\r\n IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\r\n OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,\r\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\r\n THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n/**\r\n * @license bcrypt.js (c) 2013 Daniel Wirtz <dcode@dcode.io>\r\n * Released under the Apache License, Version 2.0\r\n * see: https://github.com/dcodeIO/bcrypt.js for details\r\n */\r\n(function(global, factory) {\r\n\r\n    /* AMD */ if (typeof define === 'function' && define[\"amd\"])\r\n        define([], factory);\r\n    /* CommonJS */ else if (typeof require === 'function' && typeof module === \"object\" && module && module[\"exports\"])\r\n        module[\"exports\"] = factory();\r\n    /* Global */ else\r\n        (global[\"dcodeIO\"] = global[\"dcodeIO\"] || {})[\"bcrypt\"] = factory();\r\n\r\n}(this, function() {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * bcrypt namespace.\r\n     * @type {Object.<string,*>}\r\n     */\r\n    var bcrypt = {};\r\n\r\n    /**\r\n     * The random implementation to use as a fallback.\r\n     * @type {?function(number):!Array.<number>}\r\n     * @inner\r\n     */\r\n    var randomFallback = null;\r\n\r\n    /**\r\n     * Generates cryptographically secure random bytes.\r\n     * @function\r\n     * @param {number} len Bytes length\r\n     * @returns {!Array.<number>} Random bytes\r\n     * @throws {Error} If no random implementation is available\r\n     * @inner\r\n     */\r\n    function random(len) {\r\n        /* node */ if (typeof module !== 'undefined' && module && module['exports'])\r\n            try {\r\n                return require(\"crypto\")['randomBytes'](len);\r\n            } catch (e) {}\r\n        /* WCA */ try {\r\n            var a; (self['crypto']||self['msCrypto'])['getRandomValues'](a = new Uint32Array(len));\r\n            return Array.prototype.slice.call(a);\r\n        } catch (e) {}\r\n        /* fallback */ if (!randomFallback)\r\n            throw Error(\"Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative\");\r\n        return randomFallback(len);\r\n    }\r\n\r\n    // Test if any secure randomness source is available\r\n    var randomAvailable = false;\r\n    try {\r\n        random(1);\r\n        randomAvailable = true;\r\n    } catch (e) {}\r\n\r\n    // Default fallback, if any\r\n    randomFallback = null;\r\n    /**\r\n     * Sets the pseudo random number generator to use as a fallback if neither node's `crypto` module nor the Web Crypto\r\n     *  API is available. Please note: It is highly important that the PRNG used is cryptographically secure and that it\r\n     *  is seeded properly!\r\n     * @param {?function(number):!Array.<number>} random Function taking the number of bytes to generate as its\r\n     *  sole argument, returning the corresponding array of cryptographically secure random byte values.\r\n     * @see http://nodejs.org/api/crypto.html\r\n     * @see http://www.w3.org/TR/WebCryptoAPI/\r\n     */\r\n    bcrypt.setRandomFallback = function(random) {\r\n        randomFallback = random;\r\n    };\r\n\r\n    /**\r\n     * Synchronously generates a salt.\r\n     * @param {number=} rounds Number of rounds to use, defaults to 10 if omitted\r\n     * @param {number=} seed_length Not supported.\r\n     * @returns {string} Resulting salt\r\n     * @throws {Error} If a random fallback is required but not set\r\n     * @expose\r\n     */\r\n    bcrypt.genSaltSync = function(rounds, seed_length) {\r\n        rounds = rounds || GENSALT_DEFAULT_LOG2_ROUNDS;\r\n        if (typeof rounds !== 'number')\r\n            throw Error(\"Illegal arguments: \"+(typeof rounds)+\", \"+(typeof seed_length));\r\n        if (rounds < 4)\r\n            rounds = 4;\r\n        else if (rounds > 31)\r\n            rounds = 31;\r\n        var salt = [];\r\n        salt.push(\"$2a$\");\r\n        if (rounds < 10)\r\n            salt.push(\"0\");\r\n        salt.push(rounds.toString());\r\n        salt.push('$');\r\n        salt.push(base64_encode(random(BCRYPT_SALT_LEN), BCRYPT_SALT_LEN)); // May throw\r\n        return salt.join('');\r\n    };\r\n\r\n    /**\r\n     * Asynchronously generates a salt.\r\n     * @param {(number|function(Error, string=))=} rounds Number of rounds to use, defaults to 10 if omitted\r\n     * @param {(number|function(Error, string=))=} seed_length Not supported.\r\n     * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting salt\r\n     * @returns {!Promise} If `callback` has been omitted\r\n     * @throws {Error} If `callback` is present but not a function\r\n     * @expose\r\n     */\r\n    bcrypt.genSalt = function(rounds, seed_length, callback) {\r\n        if (typeof seed_length === 'function')\r\n            callback = seed_length,\r\n            seed_length = undefined; // Not supported.\r\n        if (typeof rounds === 'function')\r\n            callback = rounds,\r\n            rounds = undefined;\r\n        if (typeof rounds === 'undefined')\r\n            rounds = GENSALT_DEFAULT_LOG2_ROUNDS;\r\n        else if (typeof rounds !== 'number')\r\n            throw Error(\"illegal arguments: \"+(typeof rounds));\r\n\r\n        function _async(callback) {\r\n            nextTick(function() { // Pretty thin, but salting is fast enough\r\n                try {\r\n                    callback(null, bcrypt.genSaltSync(rounds));\r\n                } catch (err) {\r\n                    callback(err);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (callback) {\r\n            if (typeof callback !== 'function')\r\n                throw Error(\"Illegal callback: \"+typeof(callback));\r\n            _async(callback);\r\n        } else\r\n            return new Promise(function(resolve, reject) {\r\n                _async(function(err, res) {\r\n                    if (err) {\r\n                        reject(err);\r\n                        return;\r\n                    }\r\n                    resolve(res);\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Synchronously generates a hash for the given string.\r\n     * @param {string} s String to hash\r\n     * @param {(number|string)=} salt Salt length to generate or salt to use, default to 10\r\n     * @returns {string} Resulting hash\r\n     * @expose\r\n     */\r\n    bcrypt.hashSync = function(s, salt) {\r\n        if (typeof salt === 'undefined')\r\n            salt = GENSALT_DEFAULT_LOG2_ROUNDS;\r\n        if (typeof salt === 'number')\r\n            salt = bcrypt.genSaltSync(salt);\r\n        if (typeof s !== 'string' || typeof salt !== 'string')\r\n            throw Error(\"Illegal arguments: \"+(typeof s)+', '+(typeof salt));\r\n        return _hash(s, salt);\r\n    };\r\n\r\n    /**\r\n     * Asynchronously generates a hash for the given string.\r\n     * @param {string} s String to hash\r\n     * @param {number|string} salt Salt length to generate or salt to use\r\n     * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting hash\r\n     * @param {function(number)=} progressCallback Callback successively called with the percentage of rounds completed\r\n     *  (0.0 - 1.0), maximally once per `MAX_EXECUTION_TIME = 100` ms.\r\n     * @returns {!Promise} If `callback` has been omitted\r\n     * @throws {Error} If `callback` is present but not a function\r\n     * @expose\r\n     */\r\n    bcrypt.hash = function(s, salt, callback, progressCallback) {\r\n\r\n        function _async(callback) {\r\n            if (typeof s === 'string' && typeof salt === 'number')\r\n                bcrypt.genSalt(salt, function(err, salt) {\r\n                    _hash(s, salt, callback, progressCallback);\r\n                });\r\n            else if (typeof s === 'string' && typeof salt === 'string')\r\n                _hash(s, salt, callback, progressCallback);\r\n            else\r\n                nextTick(callback.bind(this, Error(\"Illegal arguments: \"+(typeof s)+', '+(typeof salt))));\r\n        }\r\n\r\n        if (callback) {\r\n            if (typeof callback !== 'function')\r\n                throw Error(\"Illegal callback: \"+typeof(callback));\r\n            _async(callback);\r\n        } else\r\n            return new Promise(function(resolve, reject) {\r\n                _async(function(err, res) {\r\n                    if (err) {\r\n                        reject(err);\r\n                        return;\r\n                    }\r\n                    resolve(res);\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Compares two strings of the same length in constant time.\r\n     * @param {string} known Must be of the correct length\r\n     * @param {string} unknown Must be the same length as `known`\r\n     * @returns {boolean}\r\n     * @inner\r\n     */\r\n    function safeStringCompare(known, unknown) {\r\n        var right = 0,\r\n            wrong = 0;\r\n        for (var i=0, k=known.length; i<k; ++i) {\r\n            if (known.charCodeAt(i) === unknown.charCodeAt(i))\r\n                ++right;\r\n            else\r\n                ++wrong;\r\n        }\r\n        // Prevent removal of unused variables (never true, actually)\r\n        if (right < 0)\r\n            return false;\r\n        return wrong === 0;\r\n    }\r\n\r\n    /**\r\n     * Synchronously tests a string against a hash.\r\n     * @param {string} s String to compare\r\n     * @param {string} hash Hash to test against\r\n     * @returns {boolean} true if matching, otherwise false\r\n     * @throws {Error} If an argument is illegal\r\n     * @expose\r\n     */\r\n    bcrypt.compareSync = function(s, hash) {\r\n        if (typeof s !== \"string\" || typeof hash !== \"string\")\r\n            throw Error(\"Illegal arguments: \"+(typeof s)+', '+(typeof hash));\r\n        if (hash.length !== 60)\r\n            return false;\r\n        return safeStringCompare(bcrypt.hashSync(s, hash.substr(0, hash.length-31)), hash);\r\n    };\r\n\r\n    /**\r\n     * Asynchronously compares the given data against the given hash.\r\n     * @param {string} s Data to compare\r\n     * @param {string} hash Data to be compared to\r\n     * @param {function(Error, boolean)=} callback Callback receiving the error, if any, otherwise the result\r\n     * @param {function(number)=} progressCallback Callback successively called with the percentage of rounds completed\r\n     *  (0.0 - 1.0), maximally once per `MAX_EXECUTION_TIME = 100` ms.\r\n     * @returns {!Promise} If `callback` has been omitted\r\n     * @throws {Error} If `callback` is present but not a function\r\n     * @expose\r\n     */\r\n    bcrypt.compare = function(s, hash, callback, progressCallback) {\r\n\r\n        function _async(callback) {\r\n            if (typeof s !== \"string\" || typeof hash !== \"string\") {\r\n                nextTick(callback.bind(this, Error(\"Illegal arguments: \"+(typeof s)+', '+(typeof hash))));\r\n                return;\r\n            }\r\n            if (hash.length !== 60) {\r\n                nextTick(callback.bind(this, null, false));\r\n                return;\r\n            }\r\n            bcrypt.hash(s, hash.substr(0, 29), function(err, comp) {\r\n                if (err)\r\n                    callback(err);\r\n                else\r\n                    callback(null, safeStringCompare(comp, hash));\r\n            }, progressCallback);\r\n        }\r\n\r\n        if (callback) {\r\n            if (typeof callback !== 'function')\r\n                throw Error(\"Illegal callback: \"+typeof(callback));\r\n            _async(callback);\r\n        } else\r\n            return new Promise(function(resolve, reject) {\r\n                _async(function(err, res) {\r\n                    if (err) {\r\n                        reject(err);\r\n                        return;\r\n                    }\r\n                    resolve(res);\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Gets the number of rounds used to encrypt the specified hash.\r\n     * @param {string} hash Hash to extract the used number of rounds from\r\n     * @returns {number} Number of rounds used\r\n     * @throws {Error} If `hash` is not a string\r\n     * @expose\r\n     */\r\n    bcrypt.getRounds = function(hash) {\r\n        if (typeof hash !== \"string\")\r\n            throw Error(\"Illegal arguments: \"+(typeof hash));\r\n        return parseInt(hash.split(\"$\")[2], 10);\r\n    };\r\n\r\n    /**\r\n     * Gets the salt portion from a hash. Does not validate the hash.\r\n     * @param {string} hash Hash to extract the salt from\r\n     * @returns {string} Extracted salt part\r\n     * @throws {Error} If `hash` is not a string or otherwise invalid\r\n     * @expose\r\n     */\r\n    bcrypt.getSalt = function(hash) {\r\n        if (typeof hash !== 'string')\r\n            throw Error(\"Illegal arguments: \"+(typeof hash));\r\n        if (hash.length !== 60)\r\n            throw Error(\"Illegal hash length: \"+hash.length+\" != 60\");\r\n        return hash.substring(0, 29);\r\n    };\r\n\r\n    /**\r\n     * Continues with the callback on the next tick.\r\n     * @function\r\n     * @param {function(...[*])} callback Callback to execute\r\n     * @inner\r\n     */\r\n    var nextTick = typeof process !== 'undefined' && process && typeof process.nextTick === 'function'\r\n        ? (typeof setImmediate === 'function' ? setImmediate : process.nextTick)\r\n        : setTimeout;\r\n\r\n    /**\r\n     * Converts a JavaScript string to UTF8 bytes.\r\n     * @param {string} str String\r\n     * @returns {!Array.<number>} UTF8 bytes\r\n     * @inner\r\n     */\r\n    function stringToBytes(str) {\r\n        var out = [],\r\n            i = 0;\r\n        utfx.encodeUTF16toUTF8(function() {\r\n            if (i >= str.length) return null;\r\n            return str.charCodeAt(i++);\r\n        }, function(b) {\r\n            out.push(b);\r\n        });\r\n        return out;\r\n    }\r\n\r\n    // A base64 implementation for the bcrypt algorithm. This is partly non-standard.\r\n\r\n    /**\r\n     * bcrypt's own non-standard base64 dictionary.\r\n     * @type {!Array.<string>}\r\n     * @const\r\n     * @inner\r\n     **/\r\n    var BASE64_CODE = \"./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".split('');\r\n\r\n    /**\r\n     * @type {!Array.<number>}\r\n     * @const\r\n     * @inner\r\n     **/\r\n    var BASE64_INDEX = [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 0,\r\n        1, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, -1, -1, -1, -1, -1, -1,\r\n        -1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,\r\n        20, 21, 22, 23, 24, 25, 26, 27, -1, -1, -1, -1, -1, -1, 28, 29, 30,\r\n        31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,\r\n        48, 49, 50, 51, 52, 53, -1, -1, -1, -1, -1];\r\n\r\n    /**\r\n     * @type {!function(...number):string}\r\n     * @inner\r\n     */\r\n    var stringFromCharCode = String.fromCharCode;\r\n\r\n    /**\r\n     * Encodes a byte array to base64 with up to len bytes of input.\r\n     * @param {!Array.<number>} b Byte array\r\n     * @param {number} len Maximum input length\r\n     * @returns {string}\r\n     * @inner\r\n     */\r\n    function base64_encode(b, len) {\r\n        var off = 0,\r\n            rs = [],\r\n            c1, c2;\r\n        if (len <= 0 || len > b.length)\r\n            throw Error(\"Illegal len: \"+len);\r\n        while (off < len) {\r\n            c1 = b[off++] & 0xff;\r\n            rs.push(BASE64_CODE[(c1 >> 2) & 0x3f]);\r\n            c1 = (c1 & 0x03) << 4;\r\n            if (off >= len) {\r\n                rs.push(BASE64_CODE[c1 & 0x3f]);\r\n                break;\r\n            }\r\n            c2 = b[off++] & 0xff;\r\n            c1 |= (c2 >> 4) & 0x0f;\r\n            rs.push(BASE64_CODE[c1 & 0x3f]);\r\n            c1 = (c2 & 0x0f) << 2;\r\n            if (off >= len) {\r\n                rs.push(BASE64_CODE[c1 & 0x3f]);\r\n                break;\r\n            }\r\n            c2 = b[off++] & 0xff;\r\n            c1 |= (c2 >> 6) & 0x03;\r\n            rs.push(BASE64_CODE[c1 & 0x3f]);\r\n            rs.push(BASE64_CODE[c2 & 0x3f]);\r\n        }\r\n        return rs.join('');\r\n    }\r\n\r\n    /**\r\n     * Decodes a base64 encoded string to up to len bytes of output.\r\n     * @param {string} s String to decode\r\n     * @param {number} len Maximum output length\r\n     * @returns {!Array.<number>}\r\n     * @inner\r\n     */\r\n    function base64_decode(s, len) {\r\n        var off = 0,\r\n            slen = s.length,\r\n            olen = 0,\r\n            rs = [],\r\n            c1, c2, c3, c4, o, code;\r\n        if (len <= 0)\r\n            throw Error(\"Illegal len: \"+len);\r\n        while (off < slen - 1 && olen < len) {\r\n            code = s.charCodeAt(off++);\r\n            c1 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n            code = s.charCodeAt(off++);\r\n            c2 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n            if (c1 == -1 || c2 == -1)\r\n                break;\r\n            o = (c1 << 2) >>> 0;\r\n            o |= (c2 & 0x30) >> 4;\r\n            rs.push(stringFromCharCode(o));\r\n            if (++olen >= len || off >= slen)\r\n                break;\r\n            code = s.charCodeAt(off++);\r\n            c3 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n            if (c3 == -1)\r\n                break;\r\n            o = ((c2 & 0x0f) << 4) >>> 0;\r\n            o |= (c3 & 0x3c) >> 2;\r\n            rs.push(stringFromCharCode(o));\r\n            if (++olen >= len || off >= slen)\r\n                break;\r\n            code = s.charCodeAt(off++);\r\n            c4 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n            o = ((c3 & 0x03) << 6) >>> 0;\r\n            o |= c4;\r\n            rs.push(stringFromCharCode(o));\r\n            ++olen;\r\n        }\r\n        var res = [];\r\n        for (off = 0; off<olen; off++)\r\n            res.push(rs[off].charCodeAt(0));\r\n        return res;\r\n    }\r\n\r\n    /**\r\n     * utfx-embeddable (c) 2014 Daniel Wirtz <dcode@dcode.io>\r\n     * Released under the Apache License, Version 2.0\r\n     * see: https://github.com/dcodeIO/utfx for details\r\n     */\r\n    var utfx = function() {\r\n        \"use strict\";\r\n\r\n        /**\r\n         * utfx namespace.\r\n         * @inner\r\n         * @type {!Object.<string,*>}\r\n         */\r\n        var utfx = {};\r\n\r\n        /**\r\n         * Maximum valid code point.\r\n         * @type {number}\r\n         * @const\r\n         */\r\n        utfx.MAX_CODEPOINT = 0x10FFFF;\r\n\r\n        /**\r\n         * Encodes UTF8 code points to UTF8 bytes.\r\n         * @param {(!function():number|null) | number} src Code points source, either as a function returning the next code point\r\n         *  respectively `null` if there are no more code points left or a single numeric code point.\r\n         * @param {!function(number)} dst Bytes destination as a function successively called with the next byte\r\n         */\r\n        utfx.encodeUTF8 = function(src, dst) {\r\n            var cp = null;\r\n            if (typeof src === 'number')\r\n                cp = src,\r\n                src = function() { return null; };\r\n            while (cp !== null || (cp = src()) !== null) {\r\n                if (cp < 0x80)\r\n                    dst(cp&0x7F);\r\n                else if (cp < 0x800)\r\n                    dst(((cp>>6)&0x1F)|0xC0),\r\n                    dst((cp&0x3F)|0x80);\r\n                else if (cp < 0x10000)\r\n                    dst(((cp>>12)&0x0F)|0xE0),\r\n                    dst(((cp>>6)&0x3F)|0x80),\r\n                    dst((cp&0x3F)|0x80);\r\n                else\r\n                    dst(((cp>>18)&0x07)|0xF0),\r\n                    dst(((cp>>12)&0x3F)|0x80),\r\n                    dst(((cp>>6)&0x3F)|0x80),\r\n                    dst((cp&0x3F)|0x80);\r\n                cp = null;\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Decodes UTF8 bytes to UTF8 code points.\r\n         * @param {!function():number|null} src Bytes source as a function returning the next byte respectively `null` if there\r\n         *  are no more bytes left.\r\n         * @param {!function(number)} dst Code points destination as a function successively called with each decoded code point.\r\n         * @throws {RangeError} If a starting byte is invalid in UTF8\r\n         * @throws {Error} If the last sequence is truncated. Has an array property `bytes` holding the\r\n         *  remaining bytes.\r\n         */\r\n        utfx.decodeUTF8 = function(src, dst) {\r\n            var a, b, c, d, fail = function(b) {\r\n                b = b.slice(0, b.indexOf(null));\r\n                var err = Error(b.toString());\r\n                err.name = \"TruncatedError\";\r\n                err['bytes'] = b;\r\n                throw err;\r\n            };\r\n            while ((a = src()) !== null) {\r\n                if ((a&0x80) === 0)\r\n                    dst(a);\r\n                else if ((a&0xE0) === 0xC0)\r\n                    ((b = src()) === null) && fail([a, b]),\r\n                    dst(((a&0x1F)<<6) | (b&0x3F));\r\n                else if ((a&0xF0) === 0xE0)\r\n                    ((b=src()) === null || (c=src()) === null) && fail([a, b, c]),\r\n                    dst(((a&0x0F)<<12) | ((b&0x3F)<<6) | (c&0x3F));\r\n                else if ((a&0xF8) === 0xF0)\r\n                    ((b=src()) === null || (c=src()) === null || (d=src()) === null) && fail([a, b, c ,d]),\r\n                    dst(((a&0x07)<<18) | ((b&0x3F)<<12) | ((c&0x3F)<<6) | (d&0x3F));\r\n                else throw RangeError(\"Illegal starting byte: \"+a);\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Converts UTF16 characters to UTF8 code points.\r\n         * @param {!function():number|null} src Characters source as a function returning the next char code respectively\r\n         *  `null` if there are no more characters left.\r\n         * @param {!function(number)} dst Code points destination as a function successively called with each converted code\r\n         *  point.\r\n         */\r\n        utfx.UTF16toUTF8 = function(src, dst) {\r\n            var c1, c2 = null;\r\n            while (true) {\r\n                if ((c1 = c2 !== null ? c2 : src()) === null)\r\n                    break;\r\n                if (c1 >= 0xD800 && c1 <= 0xDFFF) {\r\n                    if ((c2 = src()) !== null) {\r\n                        if (c2 >= 0xDC00 && c2 <= 0xDFFF) {\r\n                            dst((c1-0xD800)*0x400+c2-0xDC00+0x10000);\r\n                            c2 = null; continue;\r\n                        }\r\n                    }\r\n                }\r\n                dst(c1);\r\n            }\r\n            if (c2 !== null) dst(c2);\r\n        };\r\n\r\n        /**\r\n         * Converts UTF8 code points to UTF16 characters.\r\n         * @param {(!function():number|null) | number} src Code points source, either as a function returning the next code point\r\n         *  respectively `null` if there are no more code points left or a single numeric code point.\r\n         * @param {!function(number)} dst Characters destination as a function successively called with each converted char code.\r\n         * @throws {RangeError} If a code point is out of range\r\n         */\r\n        utfx.UTF8toUTF16 = function(src, dst) {\r\n            var cp = null;\r\n            if (typeof src === 'number')\r\n                cp = src, src = function() { return null; };\r\n            while (cp !== null || (cp = src()) !== null) {\r\n                if (cp <= 0xFFFF)\r\n                    dst(cp);\r\n                else\r\n                    cp -= 0x10000,\r\n                    dst((cp>>10)+0xD800),\r\n                    dst((cp%0x400)+0xDC00);\r\n                cp = null;\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Converts and encodes UTF16 characters to UTF8 bytes.\r\n         * @param {!function():number|null} src Characters source as a function returning the next char code respectively `null`\r\n         *  if there are no more characters left.\r\n         * @param {!function(number)} dst Bytes destination as a function successively called with the next byte.\r\n         */\r\n        utfx.encodeUTF16toUTF8 = function(src, dst) {\r\n            utfx.UTF16toUTF8(src, function(cp) {\r\n                utfx.encodeUTF8(cp, dst);\r\n            });\r\n        };\r\n\r\n        /**\r\n         * Decodes and converts UTF8 bytes to UTF16 characters.\r\n         * @param {!function():number|null} src Bytes source as a function returning the next byte respectively `null` if there\r\n         *  are no more bytes left.\r\n         * @param {!function(number)} dst Characters destination as a function successively called with each converted char code.\r\n         * @throws {RangeError} If a starting byte is invalid in UTF8\r\n         * @throws {Error} If the last sequence is truncated. Has an array property `bytes` holding the remaining bytes.\r\n         */\r\n        utfx.decodeUTF8toUTF16 = function(src, dst) {\r\n            utfx.decodeUTF8(src, function(cp) {\r\n                utfx.UTF8toUTF16(cp, dst);\r\n            });\r\n        };\r\n\r\n        /**\r\n         * Calculates the byte length of an UTF8 code point.\r\n         * @param {number} cp UTF8 code point\r\n         * @returns {number} Byte length\r\n         */\r\n        utfx.calculateCodePoint = function(cp) {\r\n            return (cp < 0x80) ? 1 : (cp < 0x800) ? 2 : (cp < 0x10000) ? 3 : 4;\r\n        };\r\n\r\n        /**\r\n         * Calculates the number of UTF8 bytes required to store UTF8 code points.\r\n         * @param {(!function():number|null)} src Code points source as a function returning the next code point respectively\r\n         *  `null` if there are no more code points left.\r\n         * @returns {number} The number of UTF8 bytes required\r\n         */\r\n        utfx.calculateUTF8 = function(src) {\r\n            var cp, l=0;\r\n            while ((cp = src()) !== null)\r\n                l += utfx.calculateCodePoint(cp);\r\n            return l;\r\n        };\r\n\r\n        /**\r\n         * Calculates the number of UTF8 code points respectively UTF8 bytes required to store UTF16 char codes.\r\n         * @param {(!function():number|null)} src Characters source as a function returning the next char code respectively\r\n         *  `null` if there are no more characters left.\r\n         * @returns {!Array.<number>} The number of UTF8 code points at index 0 and the number of UTF8 bytes required at index 1.\r\n         */\r\n        utfx.calculateUTF16asUTF8 = function(src) {\r\n            var n=0, l=0;\r\n            utfx.UTF16toUTF8(src, function(cp) {\r\n                ++n; l += utfx.calculateCodePoint(cp);\r\n            });\r\n            return [n,l];\r\n        };\r\n\r\n        return utfx;\r\n    }();\r\n\r\n    Date.now = Date.now || function() { return +new Date; };\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var BCRYPT_SALT_LEN = 16;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var GENSALT_DEFAULT_LOG2_ROUNDS = 10;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var BLOWFISH_NUM_ROUNDS = 16;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var MAX_EXECUTION_TIME = 100;\r\n\r\n    /**\r\n     * @type {Array.<number>}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var P_ORIG = [\r\n        0x243f6a88, 0x85a308d3, 0x13198a2e, 0x03707344, 0xa4093822,\r\n        0x299f31d0, 0x082efa98, 0xec4e6c89, 0x452821e6, 0x38d01377,\r\n        0xbe5466cf, 0x34e90c6c, 0xc0ac29b7, 0xc97c50dd, 0x3f84d5b5,\r\n        0xb5470917, 0x9216d5d9, 0x8979fb1b\r\n    ];\r\n\r\n    /**\r\n     * @type {Array.<number>}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var S_ORIG = [\r\n        0xd1310ba6, 0x98dfb5ac, 0x2ffd72db, 0xd01adfb7, 0xb8e1afed,\r\n        0x6a267e96, 0xba7c9045, 0xf12c7f99, 0x24a19947, 0xb3916cf7,\r\n        0x0801f2e2, 0x858efc16, 0x636920d8, 0x71574e69, 0xa458fea3,\r\n        0xf4933d7e, 0x0d95748f, 0x728eb658, 0x718bcd58, 0x82154aee,\r\n        0x7b54a41d, 0xc25a59b5, 0x9c30d539, 0x2af26013, 0xc5d1b023,\r\n        0x286085f0, 0xca417918, 0xb8db38ef, 0x8e79dcb0, 0x603a180e,\r\n        0x6c9e0e8b, 0xb01e8a3e, 0xd71577c1, 0xbd314b27, 0x78af2fda,\r\n        0x55605c60, 0xe65525f3, 0xaa55ab94, 0x57489862, 0x63e81440,\r\n        0x55ca396a, 0x2aab10b6, 0xb4cc5c34, 0x1141e8ce, 0xa15486af,\r\n        0x7c72e993, 0xb3ee1411, 0x636fbc2a, 0x2ba9c55d, 0x741831f6,\r\n        0xce5c3e16, 0x9b87931e, 0xafd6ba33, 0x6c24cf5c, 0x7a325381,\r\n        0x28958677, 0x3b8f4898, 0x6b4bb9af, 0xc4bfe81b, 0x66282193,\r\n        0x61d809cc, 0xfb21a991, 0x487cac60, 0x5dec8032, 0xef845d5d,\r\n        0xe98575b1, 0xdc262302, 0xeb651b88, 0x23893e81, 0xd396acc5,\r\n        0x0f6d6ff3, 0x83f44239, 0x2e0b4482, 0xa4842004, 0x69c8f04a,\r\n        0x9e1f9b5e, 0x21c66842, 0xf6e96c9a, 0x670c9c61, 0xabd388f0,\r\n        0x6a51a0d2, 0xd8542f68, 0x960fa728, 0xab5133a3, 0x6eef0b6c,\r\n        0x137a3be4, 0xba3bf050, 0x7efb2a98, 0xa1f1651d, 0x39af0176,\r\n        0x66ca593e, 0x82430e88, 0x8cee8619, 0x456f9fb4, 0x7d84a5c3,\r\n        0x3b8b5ebe, 0xe06f75d8, 0x85c12073, 0x401a449f, 0x56c16aa6,\r\n        0x4ed3aa62, 0x363f7706, 0x1bfedf72, 0x429b023d, 0x37d0d724,\r\n        0xd00a1248, 0xdb0fead3, 0x49f1c09b, 0x075372c9, 0x80991b7b,\r\n        0x25d479d8, 0xf6e8def7, 0xe3fe501a, 0xb6794c3b, 0x976ce0bd,\r\n        0x04c006ba, 0xc1a94fb6, 0x409f60c4, 0x5e5c9ec2, 0x196a2463,\r\n        0x68fb6faf, 0x3e6c53b5, 0x1339b2eb, 0x3b52ec6f, 0x6dfc511f,\r\n        0x9b30952c, 0xcc814544, 0xaf5ebd09, 0xbee3d004, 0xde334afd,\r\n        0x660f2807, 0x192e4bb3, 0xc0cba857, 0x45c8740f, 0xd20b5f39,\r\n        0xb9d3fbdb, 0x5579c0bd, 0x1a60320a, 0xd6a100c6, 0x402c7279,\r\n        0x679f25fe, 0xfb1fa3cc, 0x8ea5e9f8, 0xdb3222f8, 0x3c7516df,\r\n        0xfd616b15, 0x2f501ec8, 0xad0552ab, 0x323db5fa, 0xfd238760,\r\n        0x53317b48, 0x3e00df82, 0x9e5c57bb, 0xca6f8ca0, 0x1a87562e,\r\n        0xdf1769db, 0xd542a8f6, 0x287effc3, 0xac6732c6, 0x8c4f5573,\r\n        0x695b27b0, 0xbbca58c8, 0xe1ffa35d, 0xb8f011a0, 0x10fa3d98,\r\n        0xfd2183b8, 0x4afcb56c, 0x2dd1d35b, 0x9a53e479, 0xb6f84565,\r\n        0xd28e49bc, 0x4bfb9790, 0xe1ddf2da, 0xa4cb7e33, 0x62fb1341,\r\n        0xcee4c6e8, 0xef20cada, 0x36774c01, 0xd07e9efe, 0x2bf11fb4,\r\n        0x95dbda4d, 0xae909198, 0xeaad8e71, 0x6b93d5a0, 0xd08ed1d0,\r\n        0xafc725e0, 0x8e3c5b2f, 0x8e7594b7, 0x8ff6e2fb, 0xf2122b64,\r\n        0x8888b812, 0x900df01c, 0x4fad5ea0, 0x688fc31c, 0xd1cff191,\r\n        0xb3a8c1ad, 0x2f2f2218, 0xbe0e1777, 0xea752dfe, 0x8b021fa1,\r\n        0xe5a0cc0f, 0xb56f74e8, 0x18acf3d6, 0xce89e299, 0xb4a84fe0,\r\n        0xfd13e0b7, 0x7cc43b81, 0xd2ada8d9, 0x165fa266, 0x80957705,\r\n        0x93cc7314, 0x211a1477, 0xe6ad2065, 0x77b5fa86, 0xc75442f5,\r\n        0xfb9d35cf, 0xebcdaf0c, 0x7b3e89a0, 0xd6411bd3, 0xae1e7e49,\r\n        0x00250e2d, 0x2071b35e, 0x226800bb, 0x57b8e0af, 0x2464369b,\r\n        0xf009b91e, 0x5563911d, 0x59dfa6aa, 0x78c14389, 0xd95a537f,\r\n        0x207d5ba2, 0x02e5b9c5, 0x83260376, 0x6295cfa9, 0x11c81968,\r\n        0x4e734a41, 0xb3472dca, 0x7b14a94a, 0x1b510052, 0x9a532915,\r\n        0xd60f573f, 0xbc9bc6e4, 0x2b60a476, 0x81e67400, 0x08ba6fb5,\r\n        0x571be91f, 0xf296ec6b, 0x2a0dd915, 0xb6636521, 0xe7b9f9b6,\r\n        0xff34052e, 0xc5855664, 0x53b02d5d, 0xa99f8fa1, 0x08ba4799,\r\n        0x6e85076a, 0x4b7a70e9, 0xb5b32944, 0xdb75092e, 0xc4192623,\r\n        0xad6ea6b0, 0x49a7df7d, 0x9cee60b8, 0x8fedb266, 0xecaa8c71,\r\n        0x699a17ff, 0x5664526c, 0xc2b19ee1, 0x193602a5, 0x75094c29,\r\n        0xa0591340, 0xe4183a3e, 0x3f54989a, 0x5b429d65, 0x6b8fe4d6,\r\n        0x99f73fd6, 0xa1d29c07, 0xefe830f5, 0x4d2d38e6, 0xf0255dc1,\r\n        0x4cdd2086, 0x8470eb26, 0x6382e9c6, 0x021ecc5e, 0x09686b3f,\r\n        0x3ebaefc9, 0x3c971814, 0x6b6a70a1, 0x687f3584, 0x52a0e286,\r\n        0xb79c5305, 0xaa500737, 0x3e07841c, 0x7fdeae5c, 0x8e7d44ec,\r\n        0x5716f2b8, 0xb03ada37, 0xf0500c0d, 0xf01c1f04, 0x0200b3ff,\r\n        0xae0cf51a, 0x3cb574b2, 0x25837a58, 0xdc0921bd, 0xd19113f9,\r\n        0x7ca92ff6, 0x94324773, 0x22f54701, 0x3ae5e581, 0x37c2dadc,\r\n        0xc8b57634, 0x9af3dda7, 0xa9446146, 0x0fd0030e, 0xecc8c73e,\r\n        0xa4751e41, 0xe238cd99, 0x3bea0e2f, 0x3280bba1, 0x183eb331,\r\n        0x4e548b38, 0x4f6db908, 0x6f420d03, 0xf60a04bf, 0x2cb81290,\r\n        0x24977c79, 0x5679b072, 0xbcaf89af, 0xde9a771f, 0xd9930810,\r\n        0xb38bae12, 0xdccf3f2e, 0x5512721f, 0x2e6b7124, 0x501adde6,\r\n        0x9f84cd87, 0x7a584718, 0x7408da17, 0xbc9f9abc, 0xe94b7d8c,\r\n        0xec7aec3a, 0xdb851dfa, 0x63094366, 0xc464c3d2, 0xef1c1847,\r\n        0x3215d908, 0xdd433b37, 0x24c2ba16, 0x12a14d43, 0x2a65c451,\r\n        0x50940002, 0x133ae4dd, 0x71dff89e, 0x10314e55, 0x81ac77d6,\r\n        0x5f11199b, 0x043556f1, 0xd7a3c76b, 0x3c11183b, 0x5924a509,\r\n        0xf28fe6ed, 0x97f1fbfa, 0x9ebabf2c, 0x1e153c6e, 0x86e34570,\r\n        0xeae96fb1, 0x860e5e0a, 0x5a3e2ab3, 0x771fe71c, 0x4e3d06fa,\r\n        0x2965dcb9, 0x99e71d0f, 0x803e89d6, 0x5266c825, 0x2e4cc978,\r\n        0x9c10b36a, 0xc6150eba, 0x94e2ea78, 0xa5fc3c53, 0x1e0a2df4,\r\n        0xf2f74ea7, 0x361d2b3d, 0x1939260f, 0x19c27960, 0x5223a708,\r\n        0xf71312b6, 0xebadfe6e, 0xeac31f66, 0xe3bc4595, 0xa67bc883,\r\n        0xb17f37d1, 0x018cff28, 0xc332ddef, 0xbe6c5aa5, 0x65582185,\r\n        0x68ab9802, 0xeecea50f, 0xdb2f953b, 0x2aef7dad, 0x5b6e2f84,\r\n        0x1521b628, 0x29076170, 0xecdd4775, 0x619f1510, 0x13cca830,\r\n        0xeb61bd96, 0x0334fe1e, 0xaa0363cf, 0xb5735c90, 0x4c70a239,\r\n        0xd59e9e0b, 0xcbaade14, 0xeecc86bc, 0x60622ca7, 0x9cab5cab,\r\n        0xb2f3846e, 0x648b1eaf, 0x19bdf0ca, 0xa02369b9, 0x655abb50,\r\n        0x40685a32, 0x3c2ab4b3, 0x319ee9d5, 0xc021b8f7, 0x9b540b19,\r\n        0x875fa099, 0x95f7997e, 0x623d7da8, 0xf837889a, 0x97e32d77,\r\n        0x11ed935f, 0x16681281, 0x0e358829, 0xc7e61fd6, 0x96dedfa1,\r\n        0x7858ba99, 0x57f584a5, 0x1b227263, 0x9b83c3ff, 0x1ac24696,\r\n        0xcdb30aeb, 0x532e3054, 0x8fd948e4, 0x6dbc3128, 0x58ebf2ef,\r\n        0x34c6ffea, 0xfe28ed61, 0xee7c3c73, 0x5d4a14d9, 0xe864b7e3,\r\n        0x42105d14, 0x203e13e0, 0x45eee2b6, 0xa3aaabea, 0xdb6c4f15,\r\n        0xfacb4fd0, 0xc742f442, 0xef6abbb5, 0x654f3b1d, 0x41cd2105,\r\n        0xd81e799e, 0x86854dc7, 0xe44b476a, 0x3d816250, 0xcf62a1f2,\r\n        0x5b8d2646, 0xfc8883a0, 0xc1c7b6a3, 0x7f1524c3, 0x69cb7492,\r\n        0x47848a0b, 0x5692b285, 0x095bbf00, 0xad19489d, 0x1462b174,\r\n        0x23820e00, 0x58428d2a, 0x0c55f5ea, 0x1dadf43e, 0x233f7061,\r\n        0x3372f092, 0x8d937e41, 0xd65fecf1, 0x6c223bdb, 0x7cde3759,\r\n        0xcbee7460, 0x4085f2a7, 0xce77326e, 0xa6078084, 0x19f8509e,\r\n        0xe8efd855, 0x61d99735, 0xa969a7aa, 0xc50c06c2, 0x5a04abfc,\r\n        0x800bcadc, 0x9e447a2e, 0xc3453484, 0xfdd56705, 0x0e1e9ec9,\r\n        0xdb73dbd3, 0x105588cd, 0x675fda79, 0xe3674340, 0xc5c43465,\r\n        0x713e38d8, 0x3d28f89e, 0xf16dff20, 0x153e21e7, 0x8fb03d4a,\r\n        0xe6e39f2b, 0xdb83adf7, 0xe93d5a68, 0x948140f7, 0xf64c261c,\r\n        0x94692934, 0x411520f7, 0x7602d4f7, 0xbcf46b2e, 0xd4a20068,\r\n        0xd4082471, 0x3320f46a, 0x43b7d4b7, 0x500061af, 0x1e39f62e,\r\n        0x97244546, 0x14214f74, 0xbf8b8840, 0x4d95fc1d, 0x96b591af,\r\n        0x70f4ddd3, 0x66a02f45, 0xbfbc09ec, 0x03bd9785, 0x7fac6dd0,\r\n        0x31cb8504, 0x96eb27b3, 0x55fd3941, 0xda2547e6, 0xabca0a9a,\r\n        0x28507825, 0x530429f4, 0x0a2c86da, 0xe9b66dfb, 0x68dc1462,\r\n        0xd7486900, 0x680ec0a4, 0x27a18dee, 0x4f3ffea2, 0xe887ad8c,\r\n        0xb58ce006, 0x7af4d6b6, 0xaace1e7c, 0xd3375fec, 0xce78a399,\r\n        0x406b2a42, 0x20fe9e35, 0xd9f385b9, 0xee39d7ab, 0x3b124e8b,\r\n        0x1dc9faf7, 0x4b6d1856, 0x26a36631, 0xeae397b2, 0x3a6efa74,\r\n        0xdd5b4332, 0x6841e7f7, 0xca7820fb, 0xfb0af54e, 0xd8feb397,\r\n        0x454056ac, 0xba489527, 0x55533a3a, 0x20838d87, 0xfe6ba9b7,\r\n        0xd096954b, 0x55a867bc, 0xa1159a58, 0xcca92963, 0x99e1db33,\r\n        0xa62a4a56, 0x3f3125f9, 0x5ef47e1c, 0x9029317c, 0xfdf8e802,\r\n        0x04272f70, 0x80bb155c, 0x05282ce3, 0x95c11548, 0xe4c66d22,\r\n        0x48c1133f, 0xc70f86dc, 0x07f9c9ee, 0x41041f0f, 0x404779a4,\r\n        0x5d886e17, 0x325f51eb, 0xd59bc0d1, 0xf2bcc18f, 0x41113564,\r\n        0x257b7834, 0x602a9c60, 0xdff8e8a3, 0x1f636c1b, 0x0e12b4c2,\r\n        0x02e1329e, 0xaf664fd1, 0xcad18115, 0x6b2395e0, 0x333e92e1,\r\n        0x3b240b62, 0xeebeb922, 0x85b2a20e, 0xe6ba0d99, 0xde720c8c,\r\n        0x2da2f728, 0xd0127845, 0x95b794fd, 0x647d0862, 0xe7ccf5f0,\r\n        0x5449a36f, 0x877d48fa, 0xc39dfd27, 0xf33e8d1e, 0x0a476341,\r\n        0x992eff74, 0x3a6f6eab, 0xf4f8fd37, 0xa812dc60, 0xa1ebddf8,\r\n        0x991be14c, 0xdb6e6b0d, 0xc67b5510, 0x6d672c37, 0x2765d43b,\r\n        0xdcd0e804, 0xf1290dc7, 0xcc00ffa3, 0xb5390f92, 0x690fed0b,\r\n        0x667b9ffb, 0xcedb7d9c, 0xa091cf0b, 0xd9155ea3, 0xbb132f88,\r\n        0x515bad24, 0x7b9479bf, 0x763bd6eb, 0x37392eb3, 0xcc115979,\r\n        0x8026e297, 0xf42e312d, 0x6842ada7, 0xc66a2b3b, 0x12754ccc,\r\n        0x782ef11c, 0x6a124237, 0xb79251e7, 0x06a1bbe6, 0x4bfb6350,\r\n        0x1a6b1018, 0x11caedfa, 0x3d25bdd8, 0xe2e1c3c9, 0x44421659,\r\n        0x0a121386, 0xd90cec6e, 0xd5abea2a, 0x64af674e, 0xda86a85f,\r\n        0xbebfe988, 0x64e4c3fe, 0x9dbc8057, 0xf0f7c086, 0x60787bf8,\r\n        0x6003604d, 0xd1fd8346, 0xf6381fb0, 0x7745ae04, 0xd736fccc,\r\n        0x83426b33, 0xf01eab71, 0xb0804187, 0x3c005e5f, 0x77a057be,\r\n        0xbde8ae24, 0x55464299, 0xbf582e61, 0x4e58f48f, 0xf2ddfda2,\r\n        0xf474ef38, 0x8789bdc2, 0x5366f9c3, 0xc8b38e74, 0xb475f255,\r\n        0x46fcd9b9, 0x7aeb2661, 0x8b1ddf84, 0x846a0e79, 0x915f95e2,\r\n        0x466e598e, 0x20b45770, 0x8cd55591, 0xc902de4c, 0xb90bace1,\r\n        0xbb8205d0, 0x11a86248, 0x7574a99e, 0xb77f19b6, 0xe0a9dc09,\r\n        0x662d09a1, 0xc4324633, 0xe85a1f02, 0x09f0be8c, 0x4a99a025,\r\n        0x1d6efe10, 0x1ab93d1d, 0x0ba5a4df, 0xa186f20f, 0x2868f169,\r\n        0xdcb7da83, 0x573906fe, 0xa1e2ce9b, 0x4fcd7f52, 0x50115e01,\r\n        0xa70683fa, 0xa002b5c4, 0x0de6d027, 0x9af88c27, 0x773f8641,\r\n        0xc3604c06, 0x61a806b5, 0xf0177a28, 0xc0f586e0, 0x006058aa,\r\n        0x30dc7d62, 0x11e69ed7, 0x2338ea63, 0x53c2dd94, 0xc2c21634,\r\n        0xbbcbee56, 0x90bcb6de, 0xebfc7da1, 0xce591d76, 0x6f05e409,\r\n        0x4b7c0188, 0x39720a3d, 0x7c927c24, 0x86e3725f, 0x724d9db9,\r\n        0x1ac15bb4, 0xd39eb8fc, 0xed545578, 0x08fca5b5, 0xd83d7cd3,\r\n        0x4dad0fc4, 0x1e50ef5e, 0xb161e6f8, 0xa28514d9, 0x6c51133c,\r\n        0x6fd5c7e7, 0x56e14ec4, 0x362abfce, 0xddc6c837, 0xd79a3234,\r\n        0x92638212, 0x670efa8e, 0x406000e0, 0x3a39ce37, 0xd3faf5cf,\r\n        0xabc27737, 0x5ac52d1b, 0x5cb0679e, 0x4fa33742, 0xd3822740,\r\n        0x99bc9bbe, 0xd5118e9d, 0xbf0f7315, 0xd62d1c7e, 0xc700c47b,\r\n        0xb78c1b6b, 0x21a19045, 0xb26eb1be, 0x6a366eb4, 0x5748ab2f,\r\n        0xbc946e79, 0xc6a376d2, 0x6549c2c8, 0x530ff8ee, 0x468dde7d,\r\n        0xd5730a1d, 0x4cd04dc6, 0x2939bbdb, 0xa9ba4650, 0xac9526e8,\r\n        0xbe5ee304, 0xa1fad5f0, 0x6a2d519a, 0x63ef8ce2, 0x9a86ee22,\r\n        0xc089c2b8, 0x43242ef6, 0xa51e03aa, 0x9cf2d0a4, 0x83c061ba,\r\n        0x9be96a4d, 0x8fe51550, 0xba645bd6, 0x2826a2f9, 0xa73a3ae1,\r\n        0x4ba99586, 0xef5562e9, 0xc72fefd3, 0xf752f7da, 0x3f046f69,\r\n        0x77fa0a59, 0x80e4a915, 0x87b08601, 0x9b09e6ad, 0x3b3ee593,\r\n        0xe990fd5a, 0x9e34d797, 0x2cf0b7d9, 0x022b8b51, 0x96d5ac3a,\r\n        0x017da67d, 0xd1cf3ed6, 0x7c7d2d28, 0x1f9f25cf, 0xadf2b89b,\r\n        0x5ad6b472, 0x5a88f54c, 0xe029ac71, 0xe019a5e6, 0x47b0acfd,\r\n        0xed93fa9b, 0xe8d3c48d, 0x283b57cc, 0xf8d56629, 0x79132e28,\r\n        0x785f0191, 0xed756055, 0xf7960e44, 0xe3d35e8c, 0x15056dd4,\r\n        0x88f46dba, 0x03a16125, 0x0564f0bd, 0xc3eb9e15, 0x3c9057a2,\r\n        0x97271aec, 0xa93a072a, 0x1b3f6d9b, 0x1e6321f5, 0xf59c66fb,\r\n        0x26dcf319, 0x7533d928, 0xb155fdf5, 0x03563482, 0x8aba3cbb,\r\n        0x28517711, 0xc20ad9f8, 0xabcc5167, 0xccad925f, 0x4de81751,\r\n        0x3830dc8e, 0x379d5862, 0x9320f991, 0xea7a90c2, 0xfb3e7bce,\r\n        0x5121ce64, 0x774fbe32, 0xa8b6e37e, 0xc3293d46, 0x48de5369,\r\n        0x6413e680, 0xa2ae0810, 0xdd6db224, 0x69852dfd, 0x09072166,\r\n        0xb39a460a, 0x6445c0dd, 0x586cdecf, 0x1c20c8ae, 0x5bbef7dd,\r\n        0x1b588d40, 0xccd2017f, 0x6bb4e3bb, 0xdda26a7e, 0x3a59ff45,\r\n        0x3e350a44, 0xbcb4cdd5, 0x72eacea8, 0xfa6484bb, 0x8d6612ae,\r\n        0xbf3c6f47, 0xd29be463, 0x542f5d9e, 0xaec2771b, 0xf64e6370,\r\n        0x740e0d8d, 0xe75b1357, 0xf8721671, 0xaf537d5d, 0x4040cb08,\r\n        0x4eb4e2cc, 0x34d2466a, 0x0115af84, 0xe1b00428, 0x95983a1d,\r\n        0x06b89fb4, 0xce6ea048, 0x6f3f3b82, 0x3520ab82, 0x011a1d4b,\r\n        0x277227f8, 0x611560b1, 0xe7933fdc, 0xbb3a792b, 0x344525bd,\r\n        0xa08839e1, 0x51ce794b, 0x2f32c9b7, 0xa01fbac9, 0xe01cc87e,\r\n        0xbcc7d1f6, 0xcf0111c3, 0xa1e8aac7, 0x1a908749, 0xd44fbd9a,\r\n        0xd0dadecb, 0xd50ada38, 0x0339c32a, 0xc6913667, 0x8df9317c,\r\n        0xe0b12b4f, 0xf79e59b7, 0x43f5bb3a, 0xf2d519ff, 0x27d9459c,\r\n        0xbf97222c, 0x15e6fc2a, 0x0f91fc71, 0x9b941525, 0xfae59361,\r\n        0xceb69ceb, 0xc2a86459, 0x12baa8d1, 0xb6c1075e, 0xe3056a0c,\r\n        0x10d25065, 0xcb03a442, 0xe0ec6e0e, 0x1698db3b, 0x4c98a0be,\r\n        0x3278e964, 0x9f1f9532, 0xe0d392df, 0xd3a0342b, 0x8971f21e,\r\n        0x1b0a7441, 0x4ba3348c, 0xc5be7120, 0xc37632d8, 0xdf359f8d,\r\n        0x9b992f2e, 0xe60b6f47, 0x0fe3f11d, 0xe54cda54, 0x1edad891,\r\n        0xce6279cf, 0xcd3e7e6f, 0x1618b166, 0xfd2c1d05, 0x848fd2c5,\r\n        0xf6fb2299, 0xf523f357, 0xa6327623, 0x93a83531, 0x56cccd02,\r\n        0xacf08162, 0x5a75ebb5, 0x6e163697, 0x88d273cc, 0xde966292,\r\n        0x81b949d0, 0x4c50901b, 0x71c65614, 0xe6c6c7bd, 0x327a140a,\r\n        0x45e1d006, 0xc3f27b9a, 0xc9aa53fd, 0x62a80f00, 0xbb25bfe2,\r\n        0x35bdd2f6, 0x71126905, 0xb2040222, 0xb6cbcf7c, 0xcd769c2b,\r\n        0x53113ec0, 0x1640e3d3, 0x38abbd60, 0x2547adf0, 0xba38209c,\r\n        0xf746ce76, 0x77afa1c5, 0x20756060, 0x85cbfe4e, 0x8ae88dd8,\r\n        0x7aaaf9b0, 0x4cf9aa7e, 0x1948c25c, 0x02fb8a8c, 0x01c36ae4,\r\n        0xd6ebe1f9, 0x90d4f869, 0xa65cdea0, 0x3f09252d, 0xc208e69f,\r\n        0xb74e6132, 0xce77e25b, 0x578fdfe3, 0x3ac372e6\r\n    ];\r\n\r\n    /**\r\n     * @type {Array.<number>}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var C_ORIG = [\r\n        0x4f727068, 0x65616e42, 0x65686f6c, 0x64657253, 0x63727944,\r\n        0x6f756274\r\n    ];\r\n\r\n    /**\r\n     * @param {Array.<number>} lr\r\n     * @param {number} off\r\n     * @param {Array.<number>} P\r\n     * @param {Array.<number>} S\r\n     * @returns {Array.<number>}\r\n     * @inner\r\n     */\r\n    function _encipher(lr, off, P, S) { // This is our bottleneck: 1714/1905 ticks / 90% - see profile.txt\r\n        var n,\r\n            l = lr[off],\r\n            r = lr[off + 1];\r\n\r\n        l ^= P[0];\r\n\r\n        /*\r\n        for (var i=0, k=BLOWFISH_NUM_ROUNDS-2; i<=k;)\r\n            // Feistel substitution on left word\r\n            n  = S[l >>> 24],\r\n            n += S[0x100 | ((l >> 16) & 0xff)],\r\n            n ^= S[0x200 | ((l >> 8) & 0xff)],\r\n            n += S[0x300 | (l & 0xff)],\r\n            r ^= n ^ P[++i],\r\n            // Feistel substitution on right word\r\n            n  = S[r >>> 24],\r\n            n += S[0x100 | ((r >> 16) & 0xff)],\r\n            n ^= S[0x200 | ((r >> 8) & 0xff)],\r\n            n += S[0x300 | (r & 0xff)],\r\n            l ^= n ^ P[++i];\r\n        */\r\n\r\n        //The following is an unrolled version of the above loop.\r\n        //Iteration 0\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[1];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[2];\r\n        //Iteration 1\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[3];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[4];\r\n        //Iteration 2\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[5];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[6];\r\n        //Iteration 3\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[7];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[8];\r\n        //Iteration 4\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[9];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[10];\r\n        //Iteration 5\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[11];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[12];\r\n        //Iteration 6\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[13];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[14];\r\n        //Iteration 7\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[15];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[16];\r\n\r\n        lr[off] = r ^ P[BLOWFISH_NUM_ROUNDS + 1];\r\n        lr[off + 1] = l;\r\n        return lr;\r\n    }\r\n\r\n    /**\r\n     * @param {Array.<number>} data\r\n     * @param {number} offp\r\n     * @returns {{key: number, offp: number}}\r\n     * @inner\r\n     */\r\n    function _streamtoword(data, offp) {\r\n        for (var i = 0, word = 0; i < 4; ++i)\r\n            word = (word << 8) | (data[offp] & 0xff),\r\n            offp = (offp + 1) % data.length;\r\n        return { key: word, offp: offp };\r\n    }\r\n\r\n    /**\r\n     * @param {Array.<number>} key\r\n     * @param {Array.<number>} P\r\n     * @param {Array.<number>} S\r\n     * @inner\r\n     */\r\n    function _key(key, P, S) {\r\n        var offset = 0,\r\n            lr = [0, 0],\r\n            plen = P.length,\r\n            slen = S.length,\r\n            sw;\r\n        for (var i = 0; i < plen; i++)\r\n            sw = _streamtoword(key, offset),\r\n            offset = sw.offp,\r\n            P[i] = P[i] ^ sw.key;\r\n        for (i = 0; i < plen; i += 2)\r\n            lr = _encipher(lr, 0, P, S),\r\n            P[i] = lr[0],\r\n            P[i + 1] = lr[1];\r\n        for (i = 0; i < slen; i += 2)\r\n            lr = _encipher(lr, 0, P, S),\r\n            S[i] = lr[0],\r\n            S[i + 1] = lr[1];\r\n    }\r\n\r\n    /**\r\n     * Expensive key schedule Blowfish.\r\n     * @param {Array.<number>} data\r\n     * @param {Array.<number>} key\r\n     * @param {Array.<number>} P\r\n     * @param {Array.<number>} S\r\n     * @inner\r\n     */\r\n    function _ekskey(data, key, P, S) {\r\n        var offp = 0,\r\n            lr = [0, 0],\r\n            plen = P.length,\r\n            slen = S.length,\r\n            sw;\r\n        for (var i = 0; i < plen; i++)\r\n            sw = _streamtoword(key, offp),\r\n            offp = sw.offp,\r\n            P[i] = P[i] ^ sw.key;\r\n        offp = 0;\r\n        for (i = 0; i < plen; i += 2)\r\n            sw = _streamtoword(data, offp),\r\n            offp = sw.offp,\r\n            lr[0] ^= sw.key,\r\n            sw = _streamtoword(data, offp),\r\n            offp = sw.offp,\r\n            lr[1] ^= sw.key,\r\n            lr = _encipher(lr, 0, P, S),\r\n            P[i] = lr[0],\r\n            P[i + 1] = lr[1];\r\n        for (i = 0; i < slen; i += 2)\r\n            sw = _streamtoword(data, offp),\r\n            offp = sw.offp,\r\n            lr[0] ^= sw.key,\r\n            sw = _streamtoword(data, offp),\r\n            offp = sw.offp,\r\n            lr[1] ^= sw.key,\r\n            lr = _encipher(lr, 0, P, S),\r\n            S[i] = lr[0],\r\n            S[i + 1] = lr[1];\r\n    }\r\n\r\n    /**\r\n     * Internaly crypts a string.\r\n     * @param {Array.<number>} b Bytes to crypt\r\n     * @param {Array.<number>} salt Salt bytes to use\r\n     * @param {number} rounds Number of rounds\r\n     * @param {function(Error, Array.<number>=)=} callback Callback receiving the error, if any, and the resulting bytes. If\r\n     *  omitted, the operation will be performed synchronously.\r\n     *  @param {function(number)=} progressCallback Callback called with the current progress\r\n     * @returns {!Array.<number>|undefined} Resulting bytes if callback has been omitted, otherwise `undefined`\r\n     * @inner\r\n     */\r\n    function _crypt(b, salt, rounds, callback, progressCallback) {\r\n        var cdata = C_ORIG.slice(),\r\n            clen = cdata.length,\r\n            err;\r\n\r\n        // Validate\r\n        if (rounds < 4 || rounds > 31) {\r\n            err = Error(\"Illegal number of rounds (4-31): \"+rounds);\r\n            if (callback) {\r\n                nextTick(callback.bind(this, err));\r\n                return;\r\n            } else\r\n                throw err;\r\n        }\r\n        if (salt.length !== BCRYPT_SALT_LEN) {\r\n            err =Error(\"Illegal salt length: \"+salt.length+\" != \"+BCRYPT_SALT_LEN);\r\n            if (callback) {\r\n                nextTick(callback.bind(this, err));\r\n                return;\r\n            } else\r\n                throw err;\r\n        }\r\n        rounds = (1 << rounds) >>> 0;\r\n\r\n        var P, S, i = 0, j;\r\n\r\n        //Use typed arrays when available - huge speedup!\r\n        if (Int32Array) {\r\n            P = new Int32Array(P_ORIG);\r\n            S = new Int32Array(S_ORIG);\r\n        } else {\r\n            P = P_ORIG.slice();\r\n            S = S_ORIG.slice();\r\n        }\r\n\r\n        _ekskey(salt, b, P, S);\r\n\r\n        /**\r\n         * Calcualtes the next round.\r\n         * @returns {Array.<number>|undefined} Resulting array if callback has been omitted, otherwise `undefined`\r\n         * @inner\r\n         */\r\n        function next() {\r\n            if (progressCallback)\r\n                progressCallback(i / rounds);\r\n            if (i < rounds) {\r\n                var start = Date.now();\r\n                for (; i < rounds;) {\r\n                    i = i + 1;\r\n                    _key(b, P, S);\r\n                    _key(salt, P, S);\r\n                    if (Date.now() - start > MAX_EXECUTION_TIME)\r\n                        break;\r\n                }\r\n            } else {\r\n                for (i = 0; i < 64; i++)\r\n                    for (j = 0; j < (clen >> 1); j++)\r\n                        _encipher(cdata, j << 1, P, S);\r\n                var ret = [];\r\n                for (i = 0; i < clen; i++)\r\n                    ret.push(((cdata[i] >> 24) & 0xff) >>> 0),\r\n                    ret.push(((cdata[i] >> 16) & 0xff) >>> 0),\r\n                    ret.push(((cdata[i] >> 8) & 0xff) >>> 0),\r\n                    ret.push((cdata[i] & 0xff) >>> 0);\r\n                if (callback) {\r\n                    callback(null, ret);\r\n                    return;\r\n                } else\r\n                    return ret;\r\n            }\r\n            if (callback)\r\n                nextTick(next);\r\n        }\r\n\r\n        // Async\r\n        if (typeof callback !== 'undefined') {\r\n            next();\r\n\r\n            // Sync\r\n        } else {\r\n            var res;\r\n            while (true)\r\n                if (typeof(res = next()) !== 'undefined')\r\n                    return res || [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Internally hashes a string.\r\n     * @param {string} s String to hash\r\n     * @param {?string} salt Salt to use, actually never null\r\n     * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting hash. If omitted,\r\n     *  hashing is perormed synchronously.\r\n     *  @param {function(number)=} progressCallback Callback called with the current progress\r\n     * @returns {string|undefined} Resulting hash if callback has been omitted, otherwise `undefined`\r\n     * @inner\r\n     */\r\n    function _hash(s, salt, callback, progressCallback) {\r\n        var err;\r\n        if (typeof s !== 'string' || typeof salt !== 'string') {\r\n            err = Error(\"Invalid string / salt: Not a string\");\r\n            if (callback) {\r\n                nextTick(callback.bind(this, err));\r\n                return;\r\n            }\r\n            else\r\n                throw err;\r\n        }\r\n\r\n        // Validate the salt\r\n        var minor, offset;\r\n        if (salt.charAt(0) !== '$' || salt.charAt(1) !== '2') {\r\n            err = Error(\"Invalid salt version: \"+salt.substring(0,2));\r\n            if (callback) {\r\n                nextTick(callback.bind(this, err));\r\n                return;\r\n            }\r\n            else\r\n                throw err;\r\n        }\r\n        if (salt.charAt(2) === '$')\r\n            minor = String.fromCharCode(0),\r\n            offset = 3;\r\n        else {\r\n            minor = salt.charAt(2);\r\n            if ((minor !== 'a' && minor !== 'b' && minor !== 'y') || salt.charAt(3) !== '$') {\r\n                err = Error(\"Invalid salt revision: \"+salt.substring(2,4));\r\n                if (callback) {\r\n                    nextTick(callback.bind(this, err));\r\n                    return;\r\n                } else\r\n                    throw err;\r\n            }\r\n            offset = 4;\r\n        }\r\n\r\n        // Extract number of rounds\r\n        if (salt.charAt(offset + 2) > '$') {\r\n            err = Error(\"Missing salt rounds\");\r\n            if (callback) {\r\n                nextTick(callback.bind(this, err));\r\n                return;\r\n            } else\r\n                throw err;\r\n        }\r\n        var r1 = parseInt(salt.substring(offset, offset + 1), 10) * 10,\r\n            r2 = parseInt(salt.substring(offset + 1, offset + 2), 10),\r\n            rounds = r1 + r2,\r\n            real_salt = salt.substring(offset + 3, offset + 25);\r\n        s += minor >= 'a' ? \"\\x00\" : \"\";\r\n\r\n        var passwordb = stringToBytes(s),\r\n            saltb = base64_decode(real_salt, BCRYPT_SALT_LEN);\r\n\r\n        /**\r\n         * Finishes hashing.\r\n         * @param {Array.<number>} bytes Byte array\r\n         * @returns {string}\r\n         * @inner\r\n         */\r\n        function finish(bytes) {\r\n            var res = [];\r\n            res.push(\"$2\");\r\n            if (minor >= 'a')\r\n                res.push(minor);\r\n            res.push(\"$\");\r\n            if (rounds < 10)\r\n                res.push(\"0\");\r\n            res.push(rounds.toString());\r\n            res.push(\"$\");\r\n            res.push(base64_encode(saltb, saltb.length));\r\n            res.push(base64_encode(bytes, C_ORIG.length * 4 - 1));\r\n            return res.join('');\r\n        }\r\n\r\n        // Sync\r\n        if (typeof callback == 'undefined')\r\n            return finish(_crypt(passwordb, saltb, rounds));\r\n\r\n        // Async\r\n        else {\r\n            _crypt(passwordb, saltb, rounds, function(err, bytes) {\r\n                if (err)\r\n                    callback(err, null);\r\n                else\r\n                    callback(null, finish(bytes));\r\n            }, progressCallback);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Encodes a byte array to base64 with up to len bytes of input, using the custom bcrypt alphabet.\r\n     * @function\r\n     * @param {!Array.<number>} b Byte array\r\n     * @param {number} len Maximum input length\r\n     * @returns {string}\r\n     * @expose\r\n     */\r\n    bcrypt.encodeBase64 = base64_encode;\r\n\r\n    /**\r\n     * Decodes a base64 encoded string to up to len bytes of output, using the custom bcrypt alphabet.\r\n     * @function\r\n     * @param {string} s String to decode\r\n     * @param {number} len Maximum output length\r\n     * @returns {!Array.<number>}\r\n     * @expose\r\n     */\r\n    bcrypt.decodeBase64 = base64_decode;\r\n\r\n    return bcrypt;\r\n}));\r\n","// Data models and validation\n\nexport function createUser({ username, email, password, profilePicture = null, isAdmin = false }) {\n  return {\n    id: crypto.randomUUID(),\n    username,\n    email,\n    passwordHash: password, // Will be hashed by auth manager\n    profilePicture,\n    status: 'pending',\n    isAdmin,\n    createdAt: Date.now(),\n    approvedAt: null\n  };\n}\n\nexport function createDrinkEntry({ drinkType, quantity, consumers, payers, notes = null, createdBy }) {\n  return {\n    id: crypto.randomUUID(),\n    drinkType,\n    quantity,\n    consumers,\n    payers,\n    timestamp: Date.now(),\n    notes,\n    createdBy\n  };\n}\n\nexport function createBadge({ name, description, icon, rarity, criteria }) {\n  return {\n    id: crypto.randomUUID(),\n    name,\n    description,\n    icon,\n    rarity,\n    criteria\n  };\n}\n\nexport function createUserStats(userId) {\n  return {\n    userId,\n    totalDrinks: {\n      coffee: 0,\n      beer: 0,\n      other: 0,\n      total: 0\n    },\n    totalPaid: {\n      coffee: 0,\n      beer: 0,\n      other: 0,\n      total: 0\n    },\n    paymentRatio: 0,\n    badges: [],\n    lastActive: Date.now()\n  };\n}\n\nexport function validateEmail(email) {\n  const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return re.test(email);\n}\n\nexport function validatePassword(password) {\n  return password.length >= 8 && /[!@#$%^&*(),.?\":{}|<>]/.test(password);\n}\n\nexport function validateDrinkEntry(entry) {\n  if (!['coffee', 'beer', 'other'].includes(entry.drinkType)) {\n    return { valid: false, error: 'Invalid drink type' };\n  }\n  if (entry.quantity <= 0) {\n    return { valid: false, error: 'Quantity must be positive' };\n  }\n  if (!entry.consumers || entry.consumers.length === 0) {\n    return { valid: false, error: 'At least one consumer required' };\n  }\n  if (!entry.payers || entry.payers.length === 0) {\n    return { valid: false, error: 'At least one payer required' };\n  }\n  \n  const totalPaid = entry.payers.reduce((sum, p) => sum + p.quantity, 0);\n  if (totalPaid !== entry.quantity) {\n    return { valid: false, error: 'Payer quantities must sum to total quantity' };\n  }\n  \n  return { valid: true };\n}\n","// Authentication manager\nimport bcrypt from 'bcryptjs';\nimport { createUser, validateEmail, validatePassword } from '../data/models.js';\n\nexport class AuthManager {\n  constructor(dataManager) {\n    this.dataManager = dataManager;\n    this.currentUser = this.loadSession();\n  }\n\n  async register(username, email, password, profilePicture = null) {\n    // Validate inputs\n    if (!username || username.trim().length === 0) {\n      return { success: false, error: 'Username is required' };\n    }\n    if (!validateEmail(email)) {\n      return { success: false, error: 'Invalid email format' };\n    }\n    if (!validatePassword(password)) {\n      return { success: false, error: 'Password must be at least 8 characters and contain a special character' };\n    }\n\n    // Check if email already exists\n    if (this.dataManager.getUserByEmail(email)) {\n      return { success: false, error: 'Email already registered' };\n    }\n\n    // Hash password\n    const passwordHash = await bcrypt.hash(password, 10);\n\n    // Create user\n    const userData = createUser({\n      username,\n      email,\n      password: passwordHash,\n      profilePicture,\n      isAdmin: false\n    });\n\n    this.dataManager.createUser(userData);\n\n    return { success: true, message: 'Registration successful. Awaiting admin approval.' };\n  }\n\n  async login(email, password) {\n    const user = this.dataManager.getUserByEmail(email);\n\n    if (!user) {\n      return { success: false, error: 'Invalid email or password' };\n    }\n\n    // Check password\n    const passwordMatch = await bcrypt.compare(password, user.passwordHash);\n    if (!passwordMatch) {\n      return { success: false, error: 'Invalid email or password' };\n    }\n\n    // Check if approved\n    if (user.status === 'pending') {\n      return { success: false, error: 'Your account is awaiting admin approval' };\n    }\n\n    if (user.status === 'rejected') {\n      return { success: false, error: 'Your account has been rejected' };\n    }\n\n    // Set current user and save session\n    this.currentUser = user;\n    this.saveSession(user);\n\n    return { success: true, user };\n  }\n\n  logout() {\n    this.currentUser = null;\n    localStorage.removeItem('drink-tracker-session');\n  }\n\n  getCurrentUser() {\n    return this.currentUser;\n  }\n\n  isAuthenticated() {\n    return this.currentUser !== null && this.currentUser.status === 'approved';\n  }\n\n  isAdmin() {\n    return this.isAuthenticated() && this.currentUser.isAdmin;\n  }\n\n  approveUser(userId) {\n    if (!this.isAdmin()) {\n      return { success: false, error: 'Admin access required' };\n    }\n\n    const user = this.dataManager.updateUser(userId, {\n      status: 'approved',\n      approvedAt: Date.now()\n    });\n\n    if (user) {\n      return { success: true, user };\n    }\n\n    return { success: false, error: 'User not found' };\n  }\n\n  rejectUser(userId) {\n    if (!this.isAdmin()) {\n      return { success: false, error: 'Admin access required' };\n    }\n\n    const user = this.dataManager.updateUser(userId, {\n      status: 'rejected'\n    });\n\n    if (user) {\n      return { success: true, user };\n    }\n\n    return { success: false, error: 'User not found' };\n  }\n\n  saveSession(user) {\n    localStorage.setItem('drink-tracker-session', JSON.stringify({\n      userId: user.id,\n      email: user.email\n    }));\n  }\n\n  loadSession() {\n    try {\n      const session = localStorage.getItem('drink-tracker-session');\n      if (session) {\n        const { userId } = JSON.parse(session);\n        const user = this.dataManager.getUser(userId);\n        if (user && user.status === 'approved') {\n          return user;\n        }\n      }\n    } catch (error) {\n      console.error('Failed to load session:', error);\n    }\n    return null;\n  }\n}\n","// Drink entry management\nimport { createDrinkEntry, validateDrinkEntry } from '../data/models.js';\n\nexport class DrinkManager {\n  constructor(dataManager) {\n    this.dataManager = dataManager;\n  }\n\n  addDrinkEntry({ drinkType, quantity, consumers, payers, notes = null, createdBy }) {\n    // Create entry\n    const entry = createDrinkEntry({\n      drinkType,\n      quantity,\n      consumers,\n      payers,\n      notes,\n      createdBy\n    });\n\n    // Validate\n    const validation = validateDrinkEntry(entry);\n    if (!validation.valid) {\n      return { success: false, error: validation.error };\n    }\n\n    // Save entry\n    this.dataManager.createDrinkEntry(entry);\n\n    return { success: true, entry };\n  }\n\n  addQuickDrink(drinkType, quantity, consumerId, payerId) {\n    return this.addDrinkEntry({\n      drinkType,\n      quantity,\n      consumers: [consumerId],\n      payers: [{ userId: payerId, quantity }],\n      createdBy: consumerId\n    });\n  }\n\n  addSplitPayment({ drinkType, quantity, consumers, payers, notes = null, createdBy }) {\n    return this.addDrinkEntry({\n      drinkType,\n      quantity,\n      consumers,\n      payers,\n      notes,\n      createdBy\n    });\n  }\n\n  updateEntry(entryId, updates) {\n    const entry = this.dataManager.updateDrinkEntry(entryId, updates);\n    if (entry) {\n      return { success: true, entry };\n    }\n    return { success: false, error: 'Entry not found' };\n  }\n\n  deleteEntry(entryId) {\n    const success = this.dataManager.deleteDrinkEntry(entryId);\n    if (success) {\n      return { success: true };\n    }\n    return { success: false, error: 'Entry not found' };\n  }\n\n  getEntries() {\n    return this.dataManager.getAllDrinkEntries();\n  }\n\n  getEntry(entryId) {\n    return this.dataManager.getDrinkEntry(entryId);\n  }\n}\n","// Leaderboard calculations\n\nexport class LeaderboardManager {\n  constructor(dataManager) {\n    this.dataManager = dataManager;\n  }\n\n  getConsumptionLeaderboard(drinkType = null) {\n    const users = this.dataManager.getAllUsers().filter(u => u.status === 'approved');\n    \n    const leaderboard = users.map(user => {\n      const stats = this.dataManager.getUserStats(user.id);\n      const consumption = drinkType \n        ? stats.totalDrinks[drinkType] \n        : stats.totalDrinks.total;\n\n      return {\n        userId: user.id,\n        username: user.username,\n        profilePicture: user.profilePicture,\n        consumption,\n        drinkType\n      };\n    });\n\n    // Sort by consumption descending\n    leaderboard.sort((a, b) => b.consumption - a.consumption);\n\n    return leaderboard;\n  }\n\n  getPaymentLeaderboard() {\n    const users = this.dataManager.getAllUsers().filter(u => u.status === 'approved');\n    \n    const leaderboard = users.map(user => {\n      const stats = this.dataManager.getUserStats(user.id);\n\n      return {\n        userId: user.id,\n        username: user.username,\n        profilePicture: user.profilePicture,\n        totalPaid: stats.totalPaid.total,\n        totalConsumed: stats.totalDrinks.total,\n        percentage: stats.totalDrinks.total > 0 \n          ? ((stats.totalPaid.total / stats.totalDrinks.total) * 100).toFixed(1)\n          : 0\n      };\n    });\n\n    // Sort by total paid descending\n    leaderboard.sort((a, b) => b.totalPaid - a.totalPaid);\n\n    return leaderboard;\n  }\n\n  getFreeloaderLeaderboard() {\n    const users = this.dataManager.getAllUsers().filter(u => u.status === 'approved');\n    \n    const leaderboard = users\n      .map(user => {\n        const stats = this.dataManager.getUserStats(user.id);\n\n        return {\n          userId: user.id,\n          username: user.username,\n          profilePicture: user.profilePicture,\n          totalPaid: stats.totalPaid.total,\n          totalConsumed: stats.totalDrinks.total,\n          ratio: stats.totalPaid.total > 0 \n            ? stats.totalDrinks.total / stats.totalPaid.total \n            : (stats.totalDrinks.total > 0 ? Infinity : 0),\n          percentage: stats.totalDrinks.total > 0 \n            ? ((stats.totalPaid.total / stats.totalDrinks.total) * 100).toFixed(1)\n            : 0\n        };\n      })\n      .filter(entry => entry.totalConsumed > entry.totalPaid); // Only freeloaders\n\n    // Sort by ratio descending (higher ratio = more freeloading)\n    leaderboard.sort((a, b) => b.ratio - a.ratio);\n\n    return leaderboard;\n  }\n\n  getUserRank(userId, leaderboardType, drinkType = null) {\n    let leaderboard;\n    \n    switch (leaderboardType) {\n      case 'consumption':\n        leaderboard = this.getConsumptionLeaderboard(drinkType);\n        break;\n      case 'payment':\n        leaderboard = this.getPaymentLeaderboard();\n        break;\n      case 'freeloader':\n        leaderboard = this.getFreeloaderLeaderboard();\n        break;\n      default:\n        return null;\n    }\n\n    const rank = leaderboard.findIndex(entry => entry.userId === userId);\n    return rank >= 0 ? rank + 1 : null;\n  }\n}\n","// Badge management and awarding\n\nexport class BadgeManager {\n  constructor(dataManager) {\n    this.dataManager = dataManager;\n  }\n\n  checkAndAwardBadges(userId) {\n    const stats = this.dataManager.getUserStats(userId);\n    const allBadges = this.dataManager.getAllBadges();\n    const awardedBadges = [];\n\n    allBadges.forEach(badge => {\n      // Check if already awarded\n      if (stats.badges.find(b => b.badgeId === badge.id)) {\n        return;\n      }\n\n      // Check criteria\n      if (this.checkBadgeCriteria(badge, stats)) {\n        this.dataManager.awardBadge(userId, badge.id);\n        awardedBadges.push(badge);\n      }\n    });\n\n    return awardedBadges;\n  }\n\n  checkBadgeCriteria(badge, stats) {\n    const { type, threshold, drinkType } = badge.criteria;\n\n    switch (type) {\n      case 'total_drinks':\n        if (drinkType) {\n          return stats.totalDrinks[drinkType] >= threshold;\n        }\n        return stats.totalDrinks.total >= threshold;\n\n      case 'total_paid':\n        if (drinkType) {\n          return stats.totalPaid[drinkType] >= threshold;\n        }\n        return stats.totalPaid.total >= threshold;\n\n      case 'payment_ratio':\n        return stats.paymentRatio >= threshold;\n\n      default:\n        return false;\n    }\n  }\n\n  getUserBadges(userId) {\n    return this.dataManager.getUserBadges(userId);\n  }\n\n  getAllBadges() {\n    return this.dataManager.getAllBadges();\n  }\n\n  getBadgeProgress(userId, badgeId) {\n    const badge = this.dataManager.getAllBadges().find(b => b.id === badgeId);\n    if (!badge) return null;\n\n    const stats = this.dataManager.getUserStats(userId);\n    const { type, threshold, drinkType } = badge.criteria;\n\n    let current = 0;\n\n    switch (type) {\n      case 'total_drinks':\n        current = drinkType ? stats.totalDrinks[drinkType] : stats.totalDrinks.total;\n        break;\n      case 'total_paid':\n        current = drinkType ? stats.totalPaid[drinkType] : stats.totalPaid.total;\n        break;\n      case 'payment_ratio':\n        current = stats.paymentRatio;\n        break;\n    }\n\n    return {\n      current,\n      threshold,\n      percentage: Math.min((current / threshold) * 100, 100),\n      completed: current >= threshold\n    };\n  }\n}\n","// Statistics and fun comparisons\n\nexport class StatsManager {\n  constructor(dataManager) {\n    this.dataManager = dataManager;\n  }\n\n  getUserStats(userId) {\n    return this.dataManager.getUserStats(userId);\n  }\n\n  getGlobalStats() {\n    return this.dataManager.getGlobalStats();\n  }\n\n  getMoneyComparisons(totalSpent) {\n    // Assuming average prices: coffee $3, beer $5, other $4\n    const comparisons = [];\n\n    if (totalSpent >= 10) {\n      const pizzas = Math.floor(totalSpent / 10);\n      comparisons.push(`${pizzas} pizza${pizzas !== 1 ? 's' : ''}`);\n    }\n\n    if (totalSpent >= 1000) {\n      const iphones = Math.floor(totalSpent / 1000);\n      comparisons.push(`${iphones} iPhone${iphones !== 1 ? 's' : ''}`);\n    }\n\n    if (totalSpent >= 50) {\n      const games = Math.floor(totalSpent / 50);\n      comparisons.push(`${games} video game${games !== 1 ? 's' : ''}`);\n    }\n\n    if (totalSpent >= 15) {\n      const movies = Math.floor(totalSpent / 15);\n      comparisons.push(`${movies} movie ticket${movies !== 1 ? 's' : ''}`);\n    }\n\n    return comparisons;\n  }\n\n  getVolumeComparisons(stats) {\n    // Assuming: coffee 250ml, beer 500ml, other 350ml\n    const totalVolume = \n      (stats.totalDrinks.coffee * 250) +\n      (stats.totalDrinks.beer * 500) +\n      (stats.totalDrinks.other * 350);\n\n    const volumeInLiters = totalVolume / 1000;\n    const comparisons = [];\n\n    if (volumeInLiters >= 1) {\n      comparisons.push(`${volumeInLiters.toFixed(1)} liters of liquid`);\n    }\n\n    if (volumeInLiters >= 20) {\n      const baobabs = Math.floor(volumeInLiters / 20);\n      comparisons.push(`Enough to water ${baobabs} baobab tree${baobabs !== 1 ? 's' : ''}`);\n    }\n\n    if (volumeInLiters >= 200) {\n      const bathtubs = Math.floor(volumeInLiters / 200);\n      comparisons.push(`${bathtubs} bathtub${bathtubs !== 1 ? 's' : ''}`);\n    }\n\n    if (volumeInLiters >= 1000) {\n      const pools = (volumeInLiters / 50000).toFixed(2);\n      comparisons.push(`${pools}% of an Olympic swimming pool`);\n    }\n\n    return comparisons;\n  }\n\n  calculateTotalSpent(stats) {\n    // Average prices\n    const prices = { coffee: 3, beer: 5, other: 4 };\n    \n    return (\n      stats.totalDrinks.coffee * prices.coffee +\n      stats.totalDrinks.beer * prices.beer +\n      stats.totalDrinks.other * prices.other\n    );\n  }\n\n  getDetailedStats(userId = null) {\n    const stats = userId \n      ? this.getUserStats(userId)\n      : this.getGlobalStats();\n\n    const totalSpent = this.calculateTotalSpent(stats);\n\n    return {\n      ...stats,\n      totalSpent,\n      moneyComparisons: this.getMoneyComparisons(totalSpent),\n      volumeComparisons: this.getVolumeComparisons(stats)\n    };\n  }\n\n  getTrendData(timeRange = 'week') {\n    const entries = this.dataManager.getAllDrinkEntries();\n    const now = Date.now();\n    const ranges = {\n      day: 24 * 60 * 60 * 1000,\n      week: 7 * 24 * 60 * 60 * 1000,\n      month: 30 * 24 * 60 * 60 * 1000\n    };\n\n    const cutoff = now - ranges[timeRange];\n    const filteredEntries = entries.filter(e => e.timestamp >= cutoff);\n\n    // Group by day\n    const grouped = {};\n    filteredEntries.forEach(entry => {\n      const day = new Date(entry.timestamp).toDateString();\n      if (!grouped[day]) {\n        grouped[day] = { coffee: 0, beer: 0, other: 0 };\n      }\n      grouped[day][entry.drinkType] += entry.quantity;\n    });\n\n    return Object.entries(grouped).map(([date, drinks]) => ({\n      date,\n      ...drinks\n    }));\n  }\n\n  getPeakConsumption(timeRange = 'week') {\n    const trendData = this.getTrendData(timeRange);\n    if (trendData.length === 0) return null;\n\n    const peak = trendData.reduce((max, current) => {\n      const currentTotal = current.coffee + current.beer + current.other;\n      const maxTotal = max.coffee + max.beer + max.other;\n      return currentTotal > maxTotal ? current : max;\n    });\n\n    return peak;\n  }\n}\n","// Toast notification system\n\nexport class NotificationManager {\n  constructor() {\n    this.container = document.getElementById('notifications');\n    this.notifications = [];\n  }\n\n  show(message, type = 'info', duration = 3000) {\n    const notification = {\n      id: crypto.randomUUID(),\n      message,\n      type,\n      duration\n    };\n\n    this.notifications.push(notification);\n    this.render(notification);\n\n    if (duration > 0) {\n      setTimeout(() => this.dismiss(notification.id), duration);\n    }\n\n    return notification.id;\n  }\n\n  dismiss(id) {\n    const index = this.notifications.findIndex(n => n.id === id);\n    if (index >= 0) {\n      this.notifications.splice(index, 1);\n      const element = document.querySelector(`[data-notification-id=\"${id}\"]`);\n      if (element) {\n        element.classList.add('fade-out');\n        setTimeout(() => element.remove(), 300);\n      }\n    }\n  }\n\n  render(notification) {\n    const toast = document.createElement('div');\n    toast.className = `notification notification-${notification.type}`;\n    toast.setAttribute('data-notification-id', notification.id);\n    toast.innerHTML = `\n      <span class=\"notification-message\">${notification.message}</span>\n      <button class=\"notification-close\" onclick=\"window.notificationManager.dismiss('${notification.id}')\">√ó</button>\n    `;\n\n    this.container.appendChild(toast);\n  }\n\n  success(message, duration) {\n    return this.show(message, 'success', duration);\n  }\n\n  error(message, duration) {\n    return this.show(message, 'error', duration);\n  }\n\n  info(message, duration) {\n    return this.show(message, 'info', duration);\n  }\n\n  badge(badgeName, badgeIcon) {\n    return this.show(`üéâ Badge Sbloccato: ${badgeIcon} ${badgeName}!`, 'success', 5000);\n  }\n}\n","// Input validation utilities\n\nexport function sanitizeHTML(str) {\n  const div = document.createElement('div');\n  div.textContent = str;\n  return div.innerHTML;\n}\n\nexport function validateImageFile(file) {\n  const validTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\n  const maxSize = 5 * 1024 * 1024; // 5MB\n\n  if (!validTypes.includes(file.type)) {\n    return { valid: false, error: 'Invalid image format. Please use JPEG, PNG, GIF, or WebP.' };\n  }\n\n  if (file.size > maxSize) {\n    return { valid: false, error: 'Image too large. Maximum size is 5MB.' };\n  }\n\n  return { valid: true };\n}\n\nexport function imageToBase64(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = reject;\n    reader.readAsDataURL(file);\n  });\n}\n\nexport function validateQuantity(quantity) {\n  const num = parseInt(quantity);\n  if (isNaN(num) || num <= 0) {\n    return { valid: false, error: 'Quantity must be a positive number' };\n  }\n  if (num > 100) {\n    return { valid: false, error: 'Quantity cannot exceed 100' };\n  }\n  return { valid: true, value: num };\n}\n","// Login page component\nimport { sanitizeHTML } from '../../utils/validation.js';\n\nexport class LoginPage {\n  constructor(app) {\n    this.app = app;\n  }\n\n  render() {\n    return `\n      <div class=\"auth-container\">\n        <div class=\"auth-card\">\n          <h1>üç∫ Drink Tracker</h1>\n          <h2>Accedi</h2>\n          <form id=\"login-form\" class=\"auth-form\">\n            <div class=\"form-group\">\n              <label for=\"email\">Email</label>\n              <input type=\"email\" id=\"email\" name=\"email\" required>\n              <span class=\"error-message\" id=\"email-error\"></span>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"password\">Password</label>\n              <input type=\"password\" id=\"password\" name=\"password\" required>\n              <span class=\"error-message\" id=\"password-error\"></span>\n            </div>\n            <button type=\"submit\" class=\"btn btn-primary\">Accedi</button>\n            <div class=\"form-footer\">\n              <p>Non hai un account? <a href=\"/register\" data-link>Registrati</a></p>\n            </div>\n          </form>\n        </div>\n      </div>\n    `;\n  }\n\n  mount() {\n    const form = document.getElementById('login-form');\n    form.addEventListener('submit', (e) => this.handleSubmit(e));\n  }\n\n  async handleSubmit(e) {\n    e.preventDefault();\n    \n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n\n    // Clear previous errors\n    document.getElementById('email-error').textContent = '';\n    document.getElementById('password-error').textContent = '';\n\n    const result = await this.app.authManager.login(email, password);\n\n    if (result.success) {\n      this.app.notificationManager.success('Accesso effettuato!');\n      this.app.router.navigate('/');\n    } else {\n      this.app.notificationManager.error(result.error);\n    }\n  }\n}\n","// Registration page component\nimport { validateEmail, validatePassword } from '../../data/models.js';\nimport { validateImageFile, imageToBase64 } from '../../utils/validation.js';\n\nexport class RegisterPage {\n  constructor(app) {\n    this.app = app;\n    this.profilePicture = null;\n  }\n\n  render() {\n    return `\n      <div class=\"auth-container\">\n        <div class=\"auth-card\">\n          <h1>üç∫ Drink Tracker</h1>\n          <h2>Register</h2>\n          <form id=\"register-form\" class=\"auth-form\">\n            <div class=\"form-group\">\n              <label for=\"username\">Username</label>\n              <input type=\"text\" id=\"username\" name=\"username\" required>\n              <span class=\"error-message\" id=\"username-error\"></span>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"email\">Email</label>\n              <input type=\"email\" id=\"email\" name=\"email\" required>\n              <span class=\"error-message\" id=\"email-error\"></span>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"password\">Password</label>\n              <input type=\"password\" id=\"password\" name=\"password\" required>\n              <small>At least 8 characters with a special character</small>\n              <span class=\"error-message\" id=\"password-error\"></span>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"profile-picture\">Profile Picture (optional)</label>\n              <input type=\"file\" id=\"profile-picture\" accept=\"image/*\">\n              <div id=\"picture-preview\"></div>\n              <span class=\"error-message\" id=\"picture-error\"></span>\n            </div>\n            <button type=\"submit\" class=\"btn btn-primary\">Register</button>\n            <div class=\"form-footer\">\n              <p>Already have an account? <a href=\"/login\" data-link>Login</a></p>\n            </div>\n          </form>\n        </div>\n      </div>\n    `;\n  }\n\n  mount() {\n    const form = document.getElementById('register-form');\n    const pictureInput = document.getElementById('profile-picture');\n    \n    form.addEventListener('submit', (e) => this.handleSubmit(e));\n    pictureInput.addEventListener('change', (e) => this.handlePictureChange(e));\n  }\n\n  async handlePictureChange(e) {\n    const file = e.target.files[0];\n    const errorEl = document.getElementById('picture-error');\n    const previewEl = document.getElementById('picture-preview');\n\n    if (!file) {\n      this.profilePicture = null;\n      previewEl.innerHTML = '';\n      return;\n    }\n\n    const validation = validateImageFile(file);\n    if (!validation.valid) {\n      errorEl.textContent = validation.error;\n      this.profilePicture = null;\n      previewEl.innerHTML = '';\n      return;\n    }\n\n    errorEl.textContent = '';\n    this.profilePicture = await imageToBase64(file);\n    previewEl.innerHTML = `<img src=\"${this.profilePicture}\" alt=\"Preview\" class=\"profile-preview\">`;\n  }\n\n  async handleSubmit(e) {\n    e.preventDefault();\n    \n    const username = document.getElementById('username').value.trim();\n    const email = document.getElementById('email').value.trim();\n    const password = document.getElementById('password').value;\n\n    // Clear previous errors\n    document.getElementById('username-error').textContent = '';\n    document.getElementById('email-error').textContent = '';\n    document.getElementById('password-error').textContent = '';\n\n    // Validate\n    let hasError = false;\n\n    if (!username) {\n      document.getElementById('username-error').textContent = 'Username is required';\n      hasError = true;\n    }\n\n    if (!validateEmail(email)) {\n      document.getElementById('email-error').textContent = 'Invalid email format';\n      hasError = true;\n    }\n\n    if (!validatePassword(password)) {\n      document.getElementById('password-error').textContent = 'Password must be at least 8 characters with a special character';\n      hasError = true;\n    }\n\n    if (hasError) return;\n\n    const result = await this.app.authManager.register(username, email, password, this.profilePicture);\n\n    if (result.success) {\n      this.app.notificationManager.success(result.message);\n      setTimeout(() => this.app.router.navigate('/login'), 2000);\n    } else {\n      this.app.notificationManager.error(result.error);\n    }\n  }\n}\n","// Navigation bar component\n\nexport class NavBar {\n  constructor(app) {\n    this.app = app;\n  }\n\n  render() {\n    const user = this.app.authManager.getCurrentUser();\n    const isAdmin = this.app.authManager.isAdmin();\n\n    return `\n      <nav class=\"navbar\">\n        <div class=\"nav-container\">\n          <a href=\"/\" data-link class=\"nav-brand\">üç∫ Drink Tracker</a>\n          \n          <button class=\"hamburger\" id=\"hamburger-btn\" aria-label=\"Menu\">\n            <span></span>\n            <span></span>\n            <span></span>\n          </button>\n\n          <div class=\"nav-links\" id=\"nav-links\">\n            <a href=\"/\" data-link class=\"nav-link\">\n              <span class=\"nav-icon\">üè†</span>\n              <span>Dashboard</span>\n            </a>\n            <a href=\"/leaderboards\" data-link class=\"nav-link\">\n              <span class=\"nav-icon\">üèÜ</span>\n              <span>Classifiche</span>\n            </a>\n            <a href=\"/stats\" data-link class=\"nav-link\">\n              <span class=\"nav-icon\">üìä</span>\n              <span>Statistiche</span>\n            </a>\n            <a href=\"/profile\" data-link class=\"nav-link\">\n              <span class=\"nav-icon\">üë§</span>\n              <span>Profilo</span>\n            </a>\n            ${isAdmin ? '<a href=\"/admin\" data-link class=\"nav-link\"><span class=\"nav-icon\">‚öôÔ∏è</span><span>Admin</span></a>' : ''}\n            <div class=\"nav-actions\">\n              <button class=\"theme-toggle\" onclick=\"window.app.toggleTheme()\" title=\"Cambia tema\">\n                <span id=\"theme-icon\">üåô</span>\n              </button>\n              <button class=\"btn btn-secondary btn-sm\" onclick=\"window.app.authManager.logout(); window.app.router.navigate('/login')\">Esci</button>\n            </div>\n          </div>\n        </div>\n      </nav>\n    `;\n  }\n\n  mount() {\n    const hamburger = document.getElementById('hamburger-btn');\n    const navLinks = document.getElementById('nav-links');\n    \n    if (hamburger) {\n      hamburger.addEventListener('click', () => {\n        hamburger.classList.toggle('active');\n        navLinks.classList.toggle('active');\n      });\n\n      // Close menu when clicking a link\n      const links = navLinks.querySelectorAll('.nav-link');\n      links.forEach(link => {\n        link.addEventListener('click', () => {\n          hamburger.classList.remove('active');\n          navLinks.classList.remove('active');\n        });\n      });\n\n      // Close menu when clicking outside\n      document.addEventListener('click', (e) => {\n        if (!hamburger.contains(e.target) && !navLinks.contains(e.target)) {\n          hamburger.classList.remove('active');\n          navLinks.classList.remove('active');\n        }\n      });\n    }\n  }\n}\n","// Quick add drink component\nimport { validateQuantity } from '../../utils/validation.js';\n\nexport class QuickAddDrink {\n  constructor(app) {\n    this.app = app;\n    this.splitMode = false;\n  }\n\n  render() {\n    return `\n      <div class=\"quick-add-card\">\n        <h2>Aggiungi Bevuta</h2>\n        <div class=\"drink-type-buttons\">\n          <button class=\"drink-btn\" data-drink=\"coffee\">\n            <span class=\"drink-icon\">‚òï</span>\n            <span>Caff√®</span>\n          </button>\n          <button class=\"drink-btn\" data-drink=\"beer\">\n            <span class=\"drink-icon\">üç∫</span>\n            <span>Birra</span>\n          </button>\n          <button class=\"drink-btn\" data-drink=\"other\">\n            <span class=\"drink-icon\">ü•§</span>\n            <span>Altro</span>\n          </button>\n        </div>\n        <div id=\"drink-form-container\"></div>\n      </div>\n    `;\n  }\n\n  mount() {\n    const buttons = document.querySelectorAll('.drink-btn');\n    buttons.forEach(btn => {\n      btn.addEventListener('click', () => {\n        const drinkType = btn.getAttribute('data-drink');\n        this.showDrinkForm(drinkType);\n      });\n    });\n  }\n\n  showDrinkForm(drinkType) {\n    const container = document.getElementById('drink-form-container');\n    const users = this.app.dataManager.getAllUsers().filter(u => u.status === 'approved');\n    const currentUser = this.app.authManager.getCurrentUser();\n\n    container.innerHTML = `\n      <form id=\"add-drink-form\" class=\"drink-form\">\n        <input type=\"hidden\" id=\"drink-type\" value=\"${drinkType}\">\n        \n        <div class=\"form-group\">\n          <label for=\"quantity\">Quantit√†</label>\n          <input type=\"number\" id=\"quantity\" min=\"1\" max=\"100\" value=\"1\" required>\n        </div>\n\n        <div class=\"form-group\">\n          <label>Chi ha bevuto?</label>\n          <div class=\"user-checkboxes\">\n            ${users.map(u => `\n              <label class=\"checkbox-label\">\n                <input type=\"checkbox\" name=\"consumers\" value=\"${u.id}\" ${u.id === currentUser.id ? 'checked' : ''}>\n                ${u.username}\n              </label>\n            `).join('')}\n          </div>\n        </div>\n\n        <div class=\"form-group\">\n          <label>\n            <input type=\"checkbox\" id=\"split-mode\">\n            Pagamento Diviso\n          </label>\n        </div>\n\n        <div id=\"payer-section\">\n          <div class=\"form-group\">\n            <label for=\"payer\">Chi ha pagato?</label>\n            <select id=\"payer\" required>\n              <option value=\"\">Seleziona</option>\n              ${users.map(u => `\n                <option value=\"${u.id}\" ${u.id === currentUser.id ? 'selected' : ''}>${u.username}</option>\n              `).join('')}\n            </select>\n          </div>\n        </div>\n\n        <div id=\"split-payers-section\" style=\"display: none;\"></div>\n\n        <div class=\"form-group\">\n          <label for=\"notes\">Note (opzionale)</label>\n          <input type=\"text\" id=\"notes\" placeholder=\"Aggiungi una nota...\">\n        </div>\n\n        <div class=\"form-actions\">\n          <button type=\"button\" class=\"btn btn-secondary\" onclick=\"document.getElementById('drink-form-container').innerHTML = ''\">Annulla</button>\n          <button type=\"submit\" class=\"btn btn-primary\">Aggiungi</button>\n        </div>\n      </form>\n    `;\n\n    const form = document.getElementById('add-drink-form');\n    const splitCheckbox = document.getElementById('split-mode');\n    \n    form.addEventListener('submit', (e) => this.handleSubmit(e));\n    splitCheckbox.addEventListener('change', (e) => this.toggleSplitMode(e.target.checked));\n  }\n\n  toggleSplitMode(enabled) {\n    this.splitMode = enabled;\n    const payerSection = document.getElementById('payer-section');\n    const splitSection = document.getElementById('split-payers-section');\n\n    if (enabled) {\n      payerSection.style.display = 'none';\n      splitSection.style.display = 'block';\n      this.renderSplitPayers();\n    } else {\n      payerSection.style.display = 'block';\n      splitSection.style.display = 'none';\n    }\n  }\n\n  renderSplitPayers() {\n    const users = this.app.dataManager.getAllUsers().filter(u => u.status === 'approved');\n    const splitSection = document.getElementById('split-payers-section');\n\n    splitSection.innerHTML = `\n      <div class=\"form-group\">\n        <label>Dividi pagamento tra:</label>\n        ${users.map(u => `\n          <div class=\"split-payer\">\n            <label>${u.username}</label>\n            <input type=\"number\" class=\"split-quantity\" data-user-id=\"${u.id}\" min=\"0\" value=\"0\" placeholder=\"0\">\n          </div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  async handleSubmit(e) {\n    e.preventDefault();\n\n    const drinkType = document.getElementById('drink-type').value;\n    const quantity = parseInt(document.getElementById('quantity').value);\n    const notes = document.getElementById('notes').value || null;\n    const currentUser = this.app.authManager.getCurrentUser();\n\n    // Get consumers\n    const consumerCheckboxes = document.querySelectorAll('input[name=\"consumers\"]:checked');\n    const consumers = Array.from(consumerCheckboxes).map(cb => cb.value);\n\n    if (consumers.length === 0) {\n      this.app.notificationManager.error('Seleziona almeno una persona');\n      return;\n    }\n\n    // Get payers\n    let payers;\n    if (this.splitMode) {\n      const splitInputs = document.querySelectorAll('.split-quantity');\n      payers = Array.from(splitInputs)\n        .map(input => ({\n          userId: input.getAttribute('data-user-id'),\n          quantity: parseInt(input.value) || 0\n        }))\n        .filter(p => p.quantity > 0);\n\n      const totalPaid = payers.reduce((sum, p) => sum + p.quantity, 0);\n      if (totalPaid !== quantity) {\n        this.app.notificationManager.error(`I pagamenti devono sommare a ${quantity}`);\n        return;\n      }\n    } else {\n      const payerId = document.getElementById('payer').value;\n      if (!payerId) {\n        this.app.notificationManager.error('Seleziona chi ha pagato');\n        return;\n      }\n      payers = [{ userId: payerId, quantity }];\n    }\n\n    // Add drink entry\n    const result = this.app.drinkManager.addDrinkEntry({\n      drinkType,\n      quantity,\n      consumers,\n      payers,\n      notes,\n      createdBy: currentUser.id\n    });\n\n    if (result.success) {\n      this.app.notificationManager.success('Bevuta aggiunta!');\n      \n      // Check for new badges\n      consumers.forEach(consumerId => {\n        const newBadges = this.app.badgeManager.checkAndAwardBadges(consumerId);\n        newBadges.forEach(badge => {\n          this.app.notificationManager.badge(badge.name, badge.icon);\n        });\n      });\n\n      // Clear form\n      document.getElementById('drink-form-container').innerHTML = '';\n      \n      // Refresh page to show updated stats\n      this.app.router.handleRoute();\n    } else {\n      this.app.notificationManager.error(result.error);\n    }\n  }\n}\n","// Data formatting utilities\n\nexport function formatDate(timestamp) {\n  const date = new Date(timestamp);\n  return date.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  });\n}\n\nexport function formatDateTime(timestamp) {\n  const date = new Date(timestamp);\n  return date.toLocaleString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n}\n\nexport function formatRelativeTime(timestamp) {\n  const now = Date.now();\n  const diff = now - timestamp;\n  \n  const seconds = Math.floor(diff / 1000);\n  const minutes = Math.floor(seconds / 60);\n  const hours = Math.floor(minutes / 60);\n  const days = Math.floor(hours / 24);\n\n  if (days > 0) return `${days} day${days !== 1 ? 's' : ''} ago`;\n  if (hours > 0) return `${hours} hour${hours !== 1 ? 's' : ''} ago`;\n  if (minutes > 0) return `${minutes} minute${minutes !== 1 ? 's' : ''} ago`;\n  return 'Just now';\n}\n\nexport function formatNumber(num) {\n  return num.toLocaleString('en-US');\n}\n\nexport function formatCurrency(amount) {\n  return `$${amount.toFixed(2)}`;\n}\n\nexport function getDrinkIcon(drinkType) {\n  const icons = {\n    coffee: '‚òï',\n    beer: 'üç∫',\n    other: 'ü•§'\n  };\n  return icons[drinkType] || 'ü•§';\n}\n\nexport function getRarityColor(rarity) {\n  const colors = {\n    common: '#9ca3af',\n    rare: '#3b82f6',\n    epic: '#a855f7',\n    legendary: '#f59e0b'\n  };\n  return colors[rarity] || colors.common;\n}\n","// Recent drink entries component\nimport { formatDateTime, getDrinkIcon } from '../../utils/formatting.js';\n\nexport class RecentEntries {\n  constructor(app) {\n    this.app = app;\n  }\n\n  render() {\n    const entries = this.app.drinkManager.getEntries()\n      .sort((a, b) => b.timestamp - a.timestamp)\n      .slice(0, 10);\n\n    if (entries.length === 0) {\n      return `\n        <div class=\"recent-entries\">\n          <h2>Bevute Recenti</h2>\n          <p class=\"empty-state\">Nessuna bevuta ancora. Aggiungi la prima qui sopra!</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"recent-entries\">\n        <h2>Bevute Recenti</h2>\n        <div class=\"entries-list\">\n          ${entries.map(entry => this.renderEntry(entry)).join('')}\n        </div>\n      </div>\n    `;\n  }\n\n  renderEntry(entry) {\n    const consumers = entry.consumers.map(id => {\n      const user = this.app.dataManager.getUser(id);\n      return user ? user.username : 'Unknown';\n    }).join(', ');\n\n    const payers = entry.payers.map(p => {\n      const user = this.app.dataManager.getUser(p.userId);\n      const username = user ? user.username : 'Unknown';\n      return entry.payers.length > 1 ? `${username} (${p.quantity})` : username;\n    }).join(', ');\n\n    return `\n      <div class=\"entry-card\">\n        <div class=\"entry-icon\">${getDrinkIcon(entry.drinkType)}</div>\n        <div class=\"entry-details\">\n          <div class=\"entry-header\">\n            <span class=\"entry-quantity\">${entry.quantity}x ${entry.drinkType}</span>\n            <span class=\"entry-time\">${formatDateTime(entry.timestamp)}</span>\n          </div>\n          <div class=\"entry-info\">\n            <div>üë• ${consumers}</div>\n            <div>üí∞ ${payers}</div>\n            ${entry.notes ? `<div class=\"entry-notes\">üìù ${entry.notes}</div>` : ''}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\n","// Dashboard page - main drink entry interface\nimport { NavBar } from '../common/NavBar.js';\nimport { QuickAddDrink } from './QuickAddDrink.js';\nimport { RecentEntries } from './RecentEntries.js';\n\nexport class DashboardPage {\n  constructor(app) {\n    this.app = app;\n  }\n\n  render() {\n    const user = this.app.authManager.getCurrentUser();\n    const stats = this.app.statsManager.getUserStats(user.id);\n\n    return `\n      ${new NavBar(this.app).render()}\n      <div class=\"container\">\n        <div class=\"dashboard\">\n          <div class=\"welcome-section\">\n            <h1>Benvenuto, ${user.username}! üëã</h1>\n            <div class=\"quick-stats\">\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">‚òï</span>\n                <span class=\"stat-value\">${stats.totalDrinks.coffee}</span>\n                <span class=\"stat-label\">Caff√®</span>\n              </div>\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">üç∫</span>\n                <span class=\"stat-value\">${stats.totalDrinks.beer}</span>\n                <span class=\"stat-label\">Birre</span>\n              </div>\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">ü•§</span>\n                <span class=\"stat-value\">${stats.totalDrinks.other}</span>\n                <span class=\"stat-label\">Altro</span>\n              </div>\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">üí∞</span>\n                <span class=\"stat-value\">${stats.totalPaid.total}</span>\n                <span class=\"stat-label\">Pagato</span>\n              </div>\n            </div>\n          </div>\n          \n          <div id=\"quick-add-section\"></div>\n          <div id=\"recent-entries-section\"></div>\n        </div>\n      </div>\n    `;\n  }\n\n  mount() {\n    // Mount navbar\n    const navBar = new (require('../common/NavBar.js').NavBar)(this.app);\n    if (navBar.mount) {\n      navBar.mount();\n    }\n\n    // Mount sub-components\n    const quickAddSection = document.getElementById('quick-add-section');\n    const quickAdd = new QuickAddDrink(this.app);\n    quickAddSection.innerHTML = quickAdd.render();\n    quickAdd.mount();\n\n    const recentSection = document.getElementById('recent-entries-section');\n    const recent = new RecentEntries(this.app);\n    recentSection.innerHTML = recent.render();\n  }\n}\n","// Leaderboard page component\nimport { NavBar } from '../common/NavBar.js';\n\nexport class LeaderboardPage {\n  constructor(app) {\n    this.app = app;\n    this.activeTab = 'coffee';\n  }\n\n  render() {\n    return `\n      ${new NavBar(this.app).render()}\n      <div class=\"container\">\n        <div class=\"leaderboards\">\n          <h1>üèÜ Classifiche</h1>\n          \n          <div class=\"tabs\">\n            <button class=\"tab-btn active\" data-tab=\"coffee\">‚òï Caff√®</button>\n            <button class=\"tab-btn\" data-tab=\"beer\">üç∫ Birra</button>\n            <button class=\"tab-btn\" data-tab=\"other\">ü•§ Altro</button>\n            <button class=\"tab-btn\" data-tab=\"total\">üéØ Totale</button>\n            <button class=\"tab-btn\" data-tab=\"payment\">üí∞ Pi√π Generosi</button>\n            <button class=\"tab-btn\" data-tab=\"freeloader\">ü§ë Scrocconi</button>\n          </div>\n\n          <div id=\"leaderboard-content\"></div>\n        </div>\n      </div>\n    `;\n  }\n\n  mount() {\n    // Mount navbar\n    const navBar = new (require('../common/NavBar.js').NavBar)(this.app);\n    if (navBar.mount) {\n      navBar.mount();\n    }\n\n    const tabs = document.querySelectorAll('.tab-btn');\n    tabs.forEach(tab => {\n      tab.addEventListener('click', () => {\n        tabs.forEach(t => t.classList.remove('active'));\n        tab.classList.add('active');\n        this.activeTab = tab.getAttribute('data-tab');\n        this.renderLeaderboard();\n      });\n    });\n\n    this.renderLeaderboard();\n  }\n\n  renderLeaderboard() {\n    const container = document.getElementById('leaderboard-content');\n    const currentUser = this.app.authManager.getCurrentUser();\n\n    let leaderboard;\n    let title;\n\n    switch (this.activeTab) {\n      case 'coffee':\n      case 'beer':\n      case 'other':\n        leaderboard = this.app.leaderboardManager.getConsumptionLeaderboard(this.activeTab);\n        title = `Top ${this.activeTab.charAt(0).toUpperCase() + this.activeTab.slice(1)} Consumers`;\n        break;\n      case 'total':\n        leaderboard = this.app.leaderboardManager.getConsumptionLeaderboard(null);\n        title = 'Top Overall Consumers';\n        break;\n      case 'payment':\n        leaderboard = this.app.leaderboardManager.getPaymentLeaderboard();\n        title = 'Most Generous';\n        break;\n      case 'freeloader':\n        leaderboard = this.app.leaderboardManager.getFreeloaderLeaderboard();\n        title = 'Biggest Freeloaders';\n        break;\n    }\n\n    if (leaderboard.length === 0) {\n      container.innerHTML = `\n        <div class=\"leaderboard-section\">\n          <h2>${title}</h2>\n          <p class=\"empty-state\">No data yet!</p>\n        </div>\n      `;\n      return;\n    }\n\n    container.innerHTML = `\n      <div class=\"leaderboard-section\">\n        <h2>${title}</h2>\n        <div class=\"leaderboard-list\">\n          ${leaderboard.map((entry, index) => this.renderLeaderboardEntry(entry, index, currentUser.id)).join('')}\n        </div>\n      </div>\n    `;\n  }\n\n  renderLeaderboardEntry(entry, index, currentUserId) {\n    const isCurrentUser = entry.userId === currentUserId;\n    const rank = index + 1;\n    const medal = rank === 1 ? 'ü•á' : rank === 2 ? 'ü•à' : rank === 3 ? 'ü•â' : '';\n\n    let value;\n    if (this.activeTab === 'payment') {\n      value = `${entry.totalPaid} drinks (${entry.percentage}%)`;\n    } else if (this.activeTab === 'freeloader') {\n      value = `${entry.totalConsumed} consumed / ${entry.totalPaid} paid (${entry.percentage}%)`;\n    } else {\n      value = `${entry.consumption} drinks`;\n    }\n\n    return `\n      <div class=\"leaderboard-entry ${isCurrentUser ? 'current-user' : ''}\">\n        <div class=\"entry-rank\">${medal || rank}</div>\n        ${entry.profilePicture ? `<img src=\"${entry.profilePicture}\" class=\"entry-avatar\" alt=\"${entry.username}\">` : '<div class=\"entry-avatar-placeholder\">üë§</div>'}\n        <div class=\"entry-info\">\n          <div class=\"entry-name\">${entry.username}${isCurrentUser ? ' (You)' : ''}</div>\n          <div class=\"entry-value\">${value}</div>\n        </div>\n      </div>\n    `;\n  }\n}\n","// Profile page component\nimport { NavBar } from '../common/NavBar.js';\nimport { formatDate, getRarityColor } from '../../utils/formatting.js';\n\nexport class ProfilePage {\n  constructor(app) {\n    this.app = app;\n  }\n\n  render() {\n    const user = this.app.authManager.getCurrentUser();\n    const stats = this.app.statsManager.getDetailedStats(user.id);\n    const badges = this.app.badgeManager.getUserBadges(user.id);\n    const allBadges = this.app.badgeManager.getAllBadges();\n\n    return `\n      ${new NavBar(this.app).render()}\n      <div class=\"container\">\n        <div class=\"profile\">\n          <div class=\"profile-header\">\n            ${user.profilePicture ? `<img src=\"${user.profilePicture}\" class=\"profile-avatar\" alt=\"${user.username}\">` : '<div class=\"profile-avatar-placeholder\">üë§</div>'}\n            <div class=\"profile-info\">\n              <h1>${user.username}</h1>\n              <p>${user.email}</p>\n            </div>\n          </div>\n\n          <div class=\"profile-stats\">\n            <h2>Your Statistics</h2>\n            <div class=\"stats-grid\">\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">‚òï</span>\n                <span class=\"stat-value\">${stats.totalDrinks.coffee}</span>\n                <span class=\"stat-label\">Coffees</span>\n              </div>\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">üç∫</span>\n                <span class=\"stat-value\">${stats.totalDrinks.beer}</span>\n                <span class=\"stat-label\">Beers</span>\n              </div>\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">ü•§</span>\n                <span class=\"stat-value\">${stats.totalDrinks.other}</span>\n                <span class=\"stat-label\">Other Drinks</span>\n              </div>\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">üéØ</span>\n                <span class=\"stat-value\">${stats.totalDrinks.total}</span>\n                <span class=\"stat-label\">Total Drinks</span>\n              </div>\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">üí∞</span>\n                <span class=\"stat-value\">${stats.totalPaid.total}</span>\n                <span class=\"stat-label\">Drinks Paid For</span>\n              </div>\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">üíµ</span>\n                <span class=\"stat-value\">$${stats.totalSpent.toFixed(0)}</span>\n                <span class=\"stat-label\">Estimated Spent</span>\n              </div>\n            </div>\n\n            ${stats.moneyComparisons.length > 0 ? `\n              <div class=\"comparisons\">\n                <h3>That's enough to buy:</h3>\n                <ul>\n                  ${stats.moneyComparisons.map(c => `<li>${c}</li>`).join('')}\n                </ul>\n              </div>\n            ` : ''}\n\n            ${stats.volumeComparisons.length > 0 ? `\n              <div class=\"comparisons\">\n                <h3>Volume consumed:</h3>\n                <ul>\n                  ${stats.volumeComparisons.map(c => `<li>${c}</li>`).join('')}\n                </ul>\n              </div>\n            ` : ''}\n          </div>\n\n          <div class=\"profile-badges\">\n            <h2>Badges (${badges.length}/${allBadges.length})</h2>\n            <div class=\"badges-grid\">\n              ${allBadges.map(badge => {\n                const earned = badges.find(b => b.id === badge.id);\n                return this.renderBadge(badge, earned);\n              }).join('')}\n            </div>\n          </div>\n\n          <div class=\"profile-actions\">\n            <button class=\"btn btn-secondary\" onclick=\"window.app.router.navigate('/stats')\">View Detailed Stats</button>\n            <button class=\"btn btn-secondary\" onclick=\"document.getElementById('export-modal').style.display='block'\">Export Data</button>\n          </div>\n        </div>\n      </div>\n\n      <div id=\"export-modal\" class=\"modal\" style=\"display: none;\">\n        <div class=\"modal-content\">\n          <h2>Export Data</h2>\n          <p>Download all your drink tracking data as JSON</p>\n          <div class=\"modal-actions\">\n            <button class=\"btn btn-secondary\" onclick=\"document.getElementById('export-modal').style.display='none'\">Cancel</button>\n            <button class=\"btn btn-primary\" onclick=\"window.app.exportData()\">Download</button>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  renderBadge(badge, earned) {\n    const locked = !earned;\n    const rarityColor = getRarityColor(badge.rarity);\n\n    return `\n      <div class=\"badge-card ${locked ? 'locked' : ''}\" style=\"border-color: ${rarityColor}\">\n        <div class=\"badge-icon\">${locked ? 'üîí' : badge.icon}</div>\n        <div class=\"badge-name\">${badge.name}</div>\n        <div class=\"badge-description\">${badge.description}</div>\n        ${earned ? `<div class=\"badge-date\">Unlocked ${formatDate(earned.awardedAt)}</div>` : ''}\n        <div class=\"badge-rarity\" style=\"color: ${rarityColor}\">${badge.rarity}</div>\n      </div>\n    `;\n  }\n\n  mount() {\n    // Mount navbar\n    const navBar = new (require('../common/NavBar.js').NavBar)(this.app);\n    if (navBar.mount) {\n      navBar.mount();\n    }\n\n    // Add export functionality to window\n    window.app.exportData = () => {\n      const data = this.app.dataManager.export();\n      const blob = new Blob([data], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `drink-tracker-export-${Date.now()}.json`;\n      a.click();\n      URL.revokeObjectURL(url);\n      document.getElementById('export-modal').style.display = 'none';\n      this.app.notificationManager.success('Dati esportati con successo!');\n    };\n  }\n}\n","// Admin page component\nimport { NavBar } from '../common/NavBar.js';\nimport { formatDateTime } from '../../utils/formatting.js';\n\nexport class AdminPage {\n  constructor(app) {\n    this.app = app;\n  }\n\n  render() {\n    const pendingUsers = this.app.dataManager.getPendingUsers();\n    const allUsers = this.app.dataManager.getAllUsers();\n    const recentEntries = this.app.drinkManager.getEntries()\n      .sort((a, b) => b.timestamp - a.timestamp)\n      .slice(0, 20);\n\n    return `\n      ${new NavBar(this.app).render()}\n      <div class=\"container\">\n        <div class=\"admin-page\">\n          <h1>‚öôÔ∏è Admin Dashboard</h1>\n\n          <div class=\"admin-section\">\n            <h2>Pending Approvals (${pendingUsers.length})</h2>\n            ${pendingUsers.length === 0 ? '<p class=\"empty-state\">No pending users</p>' : `\n              <div class=\"pending-users-list\">\n                ${pendingUsers.map(user => this.renderPendingUser(user)).join('')}\n              </div>\n            `}\n          </div>\n\n          <div class=\"admin-section\">\n            <h2>All Users (${allUsers.length})</h2>\n            <div class=\"users-table\">\n              <table>\n                <thead>\n                  <tr>\n                    <th>Username</th>\n                    <th>Email</th>\n                    <th>Status</th>\n                    <th>Drinks</th>\n                    <th>Paid</th>\n                    <th>Admin</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  ${allUsers.map(user => this.renderUserRow(user)).join('')}\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <div class=\"admin-section\">\n            <h2>Recent Entries</h2>\n            <div class=\"entries-table\">\n              <table>\n                <thead>\n                  <tr>\n                    <th>Time</th>\n                    <th>Type</th>\n                    <th>Quantity</th>\n                    <th>Consumers</th>\n                    <th>Payers</th>\n                    <th>Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  ${recentEntries.map(entry => this.renderEntryRow(entry)).join('')}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  renderPendingUser(user) {\n    return `\n      <div class=\"pending-user-card\">\n        ${user.profilePicture ? `<img src=\"${user.profilePicture}\" class=\"user-avatar\" alt=\"${user.username}\">` : '<div class=\"user-avatar-placeholder\">üë§</div>'}\n        <div class=\"user-info\">\n          <div class=\"user-name\">${user.username}</div>\n          <div class=\"user-email\">${user.email}</div>\n          <div class=\"user-date\">Registered: ${formatDateTime(user.createdAt)}</div>\n        </div>\n        <div class=\"user-actions\">\n          <button class=\"btn btn-success btn-sm\" onclick=\"window.app.approveUser('${user.id}')\">Approve</button>\n          <button class=\"btn btn-danger btn-sm\" onclick=\"window.app.rejectUser('${user.id}')\">Reject</button>\n        </div>\n      </div>\n    `;\n  }\n\n  renderUserRow(user) {\n    const stats = this.app.dataManager.getUserStats(user.id);\n    return `\n      <tr>\n        <td>${user.username}</td>\n        <td>${user.email}</td>\n        <td><span class=\"status-badge status-${user.status}\">${user.status}</span></td>\n        <td>${stats.totalDrinks.total}</td>\n        <td>${stats.totalPaid.total}</td>\n        <td>${user.isAdmin ? '‚úÖ' : '‚ùå'}</td>\n      </tr>\n    `;\n  }\n\n  renderEntryRow(entry) {\n    const consumers = entry.consumers.map(id => {\n      const user = this.app.dataManager.getUser(id);\n      return user ? user.username : 'Unknown';\n    }).join(', ');\n\n    const payers = entry.payers.map(p => {\n      const user = this.app.dataManager.getUser(p.userId);\n      return user ? user.username : 'Unknown';\n    }).join(', ');\n\n    return `\n      <tr>\n        <td>${formatDateTime(entry.timestamp)}</td>\n        <td>${entry.drinkType}</td>\n        <td>${entry.quantity}</td>\n        <td>${consumers}</td>\n        <td>${payers}</td>\n        <td>\n          <button class=\"btn btn-danger btn-sm\" onclick=\"window.app.deleteEntry('${entry.id}')\">Delete</button>\n        </td>\n      </tr>\n    `;\n  }\n\n  mount() {\n    // Mount navbar\n    const navBar = new (require('../common/NavBar.js').NavBar)(this.app);\n    if (navBar.mount) {\n      navBar.mount();\n    }\n\n    window.app.approveUser = (userId) => {\n      const result = this.app.authManager.approveUser(userId);\n      if (result.success) {\n        this.app.notificationManager.success('Utente approvato!');\n        this.app.router.handleRoute();\n      } else {\n        this.app.notificationManager.error(result.error);\n      }\n    };\n\n    window.app.rejectUser = (userId) => {\n      if (confirm('Sei sicuro di voler rifiutare questo utente?')) {\n        const result = this.app.authManager.rejectUser(userId);\n        if (result.success) {\n          this.app.notificationManager.success('Utente rifiutato');\n          this.app.router.handleRoute();\n        } else {\n          this.app.notificationManager.error(result.error);\n        }\n      }\n    };\n\n    window.app.deleteEntry = (entryId) => {\n      if (confirm('Sei sicuro di voler eliminare questa bevuta? Le statistiche verranno ricalcolate.')) {\n        const result = this.app.drinkManager.deleteEntry(entryId);\n        if (result.success) {\n          this.app.notificationManager.success('Bevuta eliminata');\n          this.app.router.handleRoute();\n        } else {\n          this.app.notificationManager.error(result.error);\n        }\n      }\n    };\n  }\n}\n","// Statistics page component\nimport { NavBar } from '../common/NavBar.js';\n\nexport class StatsPage {\n  constructor(app) {\n    this.app = app;\n  }\n\n  render() {\n    const globalStats = this.app.statsManager.getDetailedStats();\n    const trendData = this.app.statsManager.getTrendData('week');\n    const peak = this.app.statsManager.getPeakConsumption('week');\n\n    return `\n      ${new NavBar(this.app).render()}\n      <div class=\"container\">\n        <div class=\"stats-page\">\n          <h1>üìä Statistics</h1>\n\n          <div class=\"stats-section\">\n            <h2>Global Statistics</h2>\n            <div class=\"stats-grid\">\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">üë•</span>\n                <span class=\"stat-value\">${globalStats.totalUsers}</span>\n                <span class=\"stat-label\">Active Users</span>\n              </div>\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">üìù</span>\n                <span class=\"stat-value\">${globalStats.totalEntries}</span>\n                <span class=\"stat-label\">Total Entries</span>\n              </div>\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">‚òï</span>\n                <span class=\"stat-value\">${globalStats.totalDrinks.coffee}</span>\n                <span class=\"stat-label\">Total Coffees</span>\n              </div>\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">üç∫</span>\n                <span class=\"stat-value\">${globalStats.totalDrinks.beer}</span>\n                <span class=\"stat-label\">Total Beers</span>\n              </div>\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">ü•§</span>\n                <span class=\"stat-value\">${globalStats.totalDrinks.other}</span>\n                <span class=\"stat-label\">Other Drinks</span>\n              </div>\n              <div class=\"stat-card\">\n                <span class=\"stat-icon\">üíµ</span>\n                <span class=\"stat-value\">$${globalStats.totalSpent.toFixed(0)}</span>\n                <span class=\"stat-label\">Total Spent</span>\n              </div>\n            </div>\n          </div>\n\n          ${globalStats.moneyComparisons.length > 0 ? `\n            <div class=\"stats-section\">\n              <h2>üí∞ Money Comparisons</h2>\n              <p>The group has spent enough to buy:</p>\n              <ul class=\"comparisons-list\">\n                ${globalStats.moneyComparisons.map(c => `<li>${c}</li>`).join('')}\n              </ul>\n            </div>\n          ` : ''}\n\n          ${globalStats.volumeComparisons.length > 0 ? `\n            <div class=\"stats-section\">\n              <h2>üåä Volume Comparisons</h2>\n              <p>The group has consumed:</p>\n              <ul class=\"comparisons-list\">\n                ${globalStats.volumeComparisons.map(c => `<li>${c}</li>`).join('')}\n              </ul>\n            </div>\n          ` : ''}\n\n          ${peak ? `\n            <div class=\"stats-section\">\n              <h2>üìà Peak Consumption</h2>\n              <p>Highest consumption day this week: <strong>${peak.date}</strong></p>\n              <div class=\"peak-stats\">\n                <span>‚òï ${peak.coffee} coffees</span>\n                <span>üç∫ ${peak.beer} beers</span>\n                <span>ü•§ ${peak.other} other drinks</span>\n              </div>\n            </div>\n          ` : ''}\n\n          ${trendData.length > 0 ? `\n            <div class=\"stats-section\">\n              <h2>üìä Weekly Trends</h2>\n              <div class=\"trend-chart\">\n                ${trendData.map(day => `\n                  <div class=\"trend-day\">\n                    <div class=\"trend-date\">${new Date(day.date).toLocaleDateString('en-US', { weekday: 'short' })}</div>\n                    <div class=\"trend-bars\">\n                      <div class=\"trend-bar coffee\" style=\"height: ${Math.min(day.coffee * 10, 100)}px\" title=\"Coffee: ${day.coffee}\"></div>\n                      <div class=\"trend-bar beer\" style=\"height: ${Math.min(day.beer * 10, 100)}px\" title=\"Beer: ${day.beer}\"></div>\n                      <div class=\"trend-bar other\" style=\"height: ${Math.min(day.other * 10, 100)}px\" title=\"Other: ${day.other}\"></div>\n                    </div>\n                  </div>\n                `).join('')}\n              </div>\n              <div class=\"trend-legend\">\n                <span><span class=\"legend-color coffee\"></span> Coffee</span>\n                <span><span class=\"legend-color beer\"></span> Beer</span>\n                <span><span class=\"legend-color other\"></span> Other</span>\n              </div>\n            </div>\n          ` : ''}\n        </div>\n      </div>\n    `;\n  }\n}\n","// Simple client-side router\nimport { LoginPage } from './auth/LoginPage.js';\nimport { RegisterPage } from './auth/RegisterPage.js';\nimport { DashboardPage } from './dashboard/DashboardPage.js';\nimport { LeaderboardPage } from './leaderboards/LeaderboardPage.js';\nimport { ProfilePage } from './profile/ProfilePage.js';\nimport { AdminPage } from './admin/AdminPage.js';\nimport { StatsPage } from './stats/StatsPage.js';\n\nexport class Router {\n  constructor(app) {\n    this.app = app;\n    this.routes = {\n      '/': DashboardPage,\n      '/login': LoginPage,\n      '/register': RegisterPage,\n      '/leaderboards': LeaderboardPage,\n      '/profile': ProfilePage,\n      '/admin': AdminPage,\n      '/stats': StatsPage\n    };\n\n    this.currentPage = null;\n    this.init();\n  }\n\n  init() {\n    // Handle navigation\n    window.addEventListener('popstate', () => this.handleRoute());\n    \n    // Handle link clicks\n    document.addEventListener('click', (e) => {\n      if (e.target.matches('[data-link]')) {\n        e.preventDefault();\n        this.navigate(e.target.getAttribute('href'));\n      }\n    });\n\n    // Initial route\n    this.handleRoute();\n  }\n\n  navigate(path) {\n    window.history.pushState({}, '', path);\n    this.handleRoute();\n  }\n\n  handleRoute() {\n    const path = window.location.pathname;\n    const PageClass = this.routes[path] || this.routes['/'];\n\n    // Check authentication\n    const isAuthenticated = this.app.authManager.isAuthenticated();\n    const isAdmin = this.app.authManager.isAdmin();\n\n    // Redirect logic\n    if (!isAuthenticated && path !== '/login' && path !== '/register') {\n      this.navigate('/login');\n      return;\n    }\n\n    if (isAuthenticated && (path === '/login' || path === '/register')) {\n      this.navigate('/');\n      return;\n    }\n\n    if (path === '/admin' && !isAdmin) {\n      this.app.notificationManager.error('Admin access required');\n      this.navigate('/');\n      return;\n    }\n\n    // Render page\n    this.renderPage(PageClass);\n  }\n\n  renderPage(PageClass) {\n    const appContainer = document.getElementById('app');\n    \n    if (this.currentPage && this.currentPage.destroy) {\n      this.currentPage.destroy();\n    }\n\n    this.currentPage = new PageClass(this.app);\n    appContainer.innerHTML = this.currentPage.render();\n\n    if (this.currentPage.mount) {\n      this.currentPage.mount();\n    }\n\n    // Mount navbar if present\n    const navbar = appContainer.querySelector('.navbar');\n    if (navbar) {\n      const navBarComponent = new (require('./components/common/NavBar.js').NavBar)(this.app);\n      if (navBarComponent.mount) {\n        navBarComponent.mount();\n      }\n    }\n  }\n}\n","// Main application entry point\nimport { DataManager } from './data/storage.js';\nimport { AuthManager } from './core/auth.js';\nimport { DrinkManager } from './core/drinks.js';\nimport { LeaderboardManager } from './core/leaderboards.js';\nimport { BadgeManager } from './core/badges.js';\nimport { StatsManager } from './core/stats.js';\nimport { NotificationManager } from './utils/notifications.js';\nimport { Router } from './components/router.js';\n\nclass App {\n  constructor() {\n    // Initialize managers\n    this.dataManager = new DataManager();\n    this.authManager = new AuthManager(this.dataManager);\n    this.drinkManager = new DrinkManager(this.dataManager);\n    this.leaderboardManager = new LeaderboardManager(this.dataManager);\n    this.badgeManager = new BadgeManager(this.dataManager);\n    this.statsManager = new StatsManager(this.dataManager);\n    this.notificationManager = new NotificationManager();\n\n    // Make notification manager globally accessible\n    window.notificationManager = this.notificationManager;\n\n    // Initialize theme\n    this.initializeTheme();\n\n    // Initialize router\n    this.router = new Router(this);\n\n    // Create first admin if no users exist\n    this.initializeFirstAdmin();\n  }\n\n  initializeTheme() {\n    const savedTheme = localStorage.getItem('drink-tracker-theme') || 'light';\n    document.documentElement.setAttribute('data-theme', savedTheme);\n    this.updateThemeIcon(savedTheme);\n  }\n\n  toggleTheme() {\n    const currentTheme = document.documentElement.getAttribute('data-theme');\n    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';\n    document.documentElement.setAttribute('data-theme', newTheme);\n    localStorage.setItem('drink-tracker-theme', newTheme);\n    this.updateThemeIcon(newTheme);\n  }\n\n  updateThemeIcon(theme) {\n    const icon = document.getElementById('theme-icon');\n    if (icon) {\n      icon.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';\n    }\n  }\n\n  async initializeFirstAdmin() {\n    const users = this.dataManager.getAllUsers();\n    if (users.length === 0) {\n      // Create default admin account\n      const result = await this.authManager.register(\n        'admin',\n        'admin@drinktracker.com',\n        'Admin123!',\n        null\n      );\n      \n      if (result.success) {\n        // Approve and set as admin\n        const admin = this.dataManager.getUserByEmail('admin@drinktracker.com');\n        this.dataManager.updateUser(admin.id, {\n          status: 'approved',\n          isAdmin: true,\n          approvedAt: Date.now()\n        });\n        console.log('Default admin created: admin@drinktracker.com / Admin123!');\n      }\n    }\n  }\n}\n\n// Initialize app when DOM is ready\ndocument.addEventListener('DOMContentLoaded', () => {\n  window.app = new App();\n});\n"],"names":["STORAGE_KEY","DataManager","stored","error","userData","userId","u","email","updates","user","entryData","entryId","e","entry","index","stats","userStat","consumerId","quantityPerConsumer","payer","badgeId","b","badge","jsonData","imported","__viteBrowserExternal","global","factory","require","module","this","bcrypt","randomFallback","random","len","require$$0","a","randomAvailable","rounds","seed_length","GENSALT_DEFAULT_LOG2_ROUNDS","salt","base64_encode","BCRYPT_SALT_LEN","callback","_async","nextTick","err","resolve","reject","res","s","_hash","progressCallback","safeStringCompare","known","unknown","right","wrong","i","k","hash","comp","stringToBytes","str","out","utfx","BASE64_CODE","BASE64_INDEX","stringFromCharCode","off","rs","c1","c2","base64_decode","slen","olen","c3","c4","o","code","src","dst","cp","d","fail","l","n","BLOWFISH_NUM_ROUNDS","MAX_EXECUTION_TIME","P_ORIG","S_ORIG","C_ORIG","_encipher","lr","P","S","r","_streamtoword","data","offp","word","_key","key","offset","plen","sw","_ekskey","_crypt","cdata","clen","j","next","start","ret","minor","r1","r2","real_salt","passwordb","saltb","finish","bytes","createUser","username","password","profilePicture","isAdmin","createDrinkEntry","drinkType","quantity","consumers","payers","notes","createdBy","validateEmail","validatePassword","validateDrinkEntry","sum","p","AuthManager","dataManager","passwordHash","session","DrinkManager","validation","payerId","LeaderboardManager","leaderboard","consumption","leaderboardType","rank","BadgeManager","allBadges","awardedBadges","type","threshold","current","StatsManager","totalSpent","comparisons","pizzas","iphones","games","movies","volumeInLiters","baobabs","bathtubs","pools","prices","timeRange","entries","now","ranges","cutoff","filteredEntries","grouped","day","date","drinks","trendData","max","currentTotal","maxTotal","NotificationManager","message","duration","notification","id","element","toast","badgeName","badgeIcon","validateImageFile","file","imageToBase64","reader","LoginPage","app","result","RegisterPage","form","pictureInput","errorEl","previewEl","hasError","NavBar","hamburger","navLinks","link","QuickAddDrink","btn","container","users","currentUser","splitCheckbox","enabled","payerSection","splitSection","consumerCheckboxes","cb","splitInputs","input","formatDate","timestamp","formatDateTime","getDrinkIcon","getRarityColor","rarity","colors","RecentEntries","DashboardPage","navBar","quickAddSection","quickAdd","recentSection","recent","LeaderboardPage","tabs","tab","t","title","currentUserId","isCurrentUser","medal","value","ProfilePage","badges","c","earned","locked","rarityColor","blob","url","AdminPage","pendingUsers","allUsers","recentEntries","StatsPage","globalStats","peak","Router","path","PageClass","isAuthenticated","appContainer","navBarComponent","App","savedTheme","newTheme","theme","icon","admin"],"mappings":"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,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,UAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,UAAY,WAAY,UAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,UAAY,WAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,UAAY,WAAY,WAAY,WAAY,WAChD,SAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,UAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,QAAY,UAAY,UAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,SAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,UAAY,WAAY,UAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,SAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,SAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,SAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,UAAY,UAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,UAAY,UAChD,WAAY,WAAY,WAAY,WAAY,UAChD,UAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,WAAY,UAAY,UAAY,UAChD,WAAY,UAAY,WAAY,UAAY,WAChD,WAAY,SAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,UAAY,UAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,SAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,UAAY,UAAY,WAAY,WAAY,UAChD,WAAY,SAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,UAAY,UAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,UAChD,UAAY,WAAY,UAAY,UAAY,UAChD,UAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,UAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,SAAY,WAChD,UAAY,WAAY,WAAY,WAAY,WAChD,UAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,UAChD,UAAY,WAAY,UAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,SAAY,WAAY,SAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,UAAY,UAChD,SAAY,WAAY,WAAY,WAAY,UAChD,UAAY,WAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,UAAY,UAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,UAAY,UAAY,UAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,QAChD,UAAY,UAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,UAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,UAAY,SAAY,WAChD,SAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,SAAY,SAAY,WAAY,WAChD,WAAY,WAAY,UAAY,UAAY,WAChD,UAAY,WAAY,WAAY,SAAY,WAChD,UAAY,WAAY,WAAY,WAAY,WAChD,UAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,UAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,SAAY,UAAY,WAChD,UAAY,WAAY,WAAY,UAAY,SAChD,UAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,SAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,UAAY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","x_google_ignoreList":[2]}